window.__require=function t(e,o,n){function i(s,a){if(!o[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var d=o[s]={exports:{}};e[s][0].call(d.exports,function(t){return i(e[s][1][t]||t)},d,d.exports,t,e,o,n)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<n.length;s++)i(n[s]);return i}({BarracksInfo:[function(t,e,o){"use strict";cc._RF.push(e,"fa4a7AysSdJBaoEHfyNsVU+","BarracksInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./GameConfig"),i=t("./SolderInfoBase"),r=cc._decorator,s=r.ccclass,a=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressExp=null,e.labLV=null,e.labExp=null,e.labHP=null,e.labATK=null,e.labAVD=null,e.labCRI=null,e.imgLv=null,e.imgSoldierType=null,e.txtLv=0,e.soldierID=0,e.Infantry=null,e.Spearman=null,e.Cavalryman=null,e.Archer=null,e.gameConfig=null,e.lastWidthlabLV=0,e}return __extends(e,t),e.prototype.onLoad=function(){if(this.gameConfig=new n.default,this.gameConfig.Load(),this.flash(),cc.sys.platform==cc.sys.WECHAT_GAME);else{var t=window.document.createElement("script");t.src="https://hm.baidu.com/hm.js?2a304e91d6eab9ab5ea144c17dc786b4";var e=window.document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}},e.prototype.update=function(){var t=this.labLV.node.width;t!=this.lastWidthlabLV&&(this.lastWidthlabLV=t,this.imgLv.x=t)},e.prototype.flash=function(){switch(this.soldierID){case 0:this.imgSoldierType.spriteFrame=this.Infantry;break;case 1:this.imgSoldierType.spriteFrame=this.Spearman;break;case 2:this.imgSoldierType.spriteFrame=this.Cavalryman;break;case 3:this.imgSoldierType.spriteFrame=this.Archer}this.txtLv=this.gameConfig.getSoldierLv(this.soldierID);var t=this.gameConfig.getSoldierExp(this.soldierID),e=new i.default(this.soldierID,this.txtLv,t),o=e.NextExp;this.labExp.string=t+"/"+o,this.progressExp.progress=t/o,this.labLV.string=""+this.txtLv,this.labHP.string=""+e.HP,this.labATK.string=""+e.ATK,this.labAVD.string=Math.round(100*e.AVD)+"%",this.labCRI.string=Math.round(100*e.CRI)+"%"},__decorate([a(cc.ProgressBar)],e.prototype,"progressExp",void 0),__decorate([a(cc.Label)],e.prototype,"labLV",void 0),__decorate([a(cc.Label)],e.prototype,"labExp",void 0),__decorate([a(cc.Label)],e.prototype,"labHP",void 0),__decorate([a(cc.Label)],e.prototype,"labATK",void 0),__decorate([a(cc.Label)],e.prototype,"labAVD",void 0),__decorate([a(cc.Label)],e.prototype,"labCRI",void 0),__decorate([a(cc.Node)],e.prototype,"imgLv",void 0),__decorate([a(cc.Sprite)],e.prototype,"imgSoldierType",void 0),__decorate([a],e.prototype,"txtLv",void 0),__decorate([a],e.prototype,"soldierID",void 0),__decorate([a(cc.SpriteFrame)],e.prototype,"Infantry",void 0),__decorate([a(cc.SpriteFrame)],e.prototype,"Spearman",void 0),__decorate([a(cc.SpriteFrame)],e.prototype,"Cavalryman",void 0),__decorate([a(cc.SpriteFrame)],e.prototype,"Archer",void 0),__decorate([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./GameConfig":"GameConfig","./SolderInfoBase":"SolderInfoBase"}],BarracksSelection:[function(t,e,o){"use strict";cc._RF.push(e,"224ecPdrt5ARpRr+VVqY7/P","BarracksSelection"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LeftUnselected=null,e.LeftSelected=null,e.RightUnselected=null,e.RightSelected=null,e.isFocus=!0,e.objAni=null,e.onClick_LeftUnselectedPlus=null,e.onClick_RightUnselectedPlus=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.objAni=this.getComponent("cc.Animation"),this.LeftUnselected.on("click",this.onClick_LeftUnselected,this),this.RightUnselected.on("click",this.onClick_RightUnselected,this),this.flash()},e.prototype.flash=function(){var t=this.objAni.getClips();this.isFocus?(this.objAni.play(t[0].name),this.RightSelected.active=!0):(this.objAni.stop(),this.LeftSelected.active=!1,this.RightSelected.active=!1)},e.prototype.setFocus=function(t){this.isFocus=t},e.prototype.setOnClick_LeftUnselected=function(t){this.onClick_LeftUnselectedPlus=t},e.prototype.setOnClick_RightUnselected=function(t){this.onClick_RightUnselectedPlus=t},e.prototype.onClick_LeftUnselected=function(t){this.setFocus(!0),this.onClick_LeftUnselectedPlus&&this.onClick_LeftUnselectedPlus(t)},e.prototype.onClick_RightUnselected=function(t){this.setFocus(!0),this.onClick_RightUnselectedPlus&&this.onClick_RightUnselectedPlus(t)},__decorate([r(cc.Node)],e.prototype,"LeftUnselected",void 0),__decorate([r(cc.Node)],e.prototype,"LeftSelected",void 0),__decorate([r(cc.Node)],e.prototype,"RightUnselected",void 0),__decorate([r(cc.Node)],e.prototype,"RightSelected",void 0),__decorate([r],e.prototype,"isFocus",void 0),__decorate([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],Battle:[function(t,e,o){"use strict";cc._RF.push(e,"c5b06qI1CxBNZTPfdfFWkGH","Battle"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ID=-1,e.Hard=-1,e.Name="",e.SoldierType="",e.KillSoldiers=-1,e.EnemyHeroID=-1,e.EnemyHomeHP=-1,e.Map="",e}var o;return __extends(e,t),o=e,e.newBattle=function(t,e,n,i,r,s,a,c){var l=new o;return l.ID=t,l.Hard=e,l.Name=n,l.SoldierType=i,l.KillSoldiers=r,l.EnemyHeroID=s,l.EnemyHomeHP=a,l.Map=c,l},o=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],CastleSelection:[function(t,e,o){"use strict";cc._RF.push(e,"ddf2frsJz9A0pL0P/2TZyxj","CastleSelection"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LeftUnselected=null,e.LeftSelected=null,e.RightUnselected=null,e.RightSelected=null,e.isFocus=!0,e.objAni=null,e.onClick_LeftUnselectedPlus=null,e.onClick_RightUnselectedPlus=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.objAni=this.getComponent("cc.Animation"),this.LeftUnselected.on("click",this.onClick_LeftUnselected,this),this.RightUnselected.on("click",this.onClick_RightUnselected,this),this.flash()},e.prototype.flash=function(){var t=this.objAni.getClips();this.isFocus?(this.objAni.play(t[0].name),this.RightSelected.active=!0):(this.objAni.stop(),this.LeftSelected.active=!1,this.RightSelected.active=!1)},e.prototype.setFocus=function(t){this.isFocus=t},e.prototype.setOnClick_LeftUnselected=function(t){this.onClick_LeftUnselectedPlus=t},e.prototype.setOnClick_RightUnselected=function(t){this.onClick_RightUnselectedPlus=t},e.prototype.onClick_LeftUnselected=function(t){this.setFocus(!0),this.onClick_LeftUnselectedPlus&&this.onClick_LeftUnselectedPlus(t)},e.prototype.onClick_RightUnselected=function(t){this.setFocus(!0),this.onClick_RightUnselectedPlus&&this.onClick_RightUnselectedPlus(t)},__decorate([r(cc.Node)],e.prototype,"LeftUnselected",void 0),__decorate([r(cc.Node)],e.prototype,"LeftSelected",void 0),__decorate([r(cc.Node)],e.prototype,"RightUnselected",void 0),__decorate([r(cc.Node)],e.prototype,"RightSelected",void 0),__decorate([r],e.prototype,"isFocus",void 0),__decorate([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],ChargeSelection:[function(t,e,o){"use strict";cc._RF.push(e,"d6cf5WOSHdEOIhBtHsu4UOW","ChargeSelection"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Unselected=null,e.Selected=null,e.isFocus=!0,e}return __extends(e,t),e.prototype.onLoad=function(){this.flash()},e.prototype.flash=function(){this.Selected.active=!1,this.Unselected.active=!1,this.isFocus?this.Selected.active=!0:this.Unselected.active=!0},e.prototype.setFocus=function(t){this.isFocus=t},__decorate([r(cc.Node)],e.prototype,"Unselected",void 0),__decorate([r(cc.Node)],e.prototype,"Selected",void 0),__decorate([r],e.prototype,"isFocus",void 0),__decorate([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],ConfigWindow:[function(t,e,o){"use strict";cc._RF.push(e,"b2933D7L/dJt7HoIpZFHIbK","ConfigWindow"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./GameConfig"),i=cc._decorator,r=i.ccclass,s=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnBack=null,e.togCfgMusic=null,e.togCfgSound=null,e.onClick_btnBackPlus=null,e.gameConfig=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.ReloadUserConfig(),this.togCfgMusic.node.on("toggle",this.onToggle_togCfgMusic,this),this.togCfgSound.node.on("toggle",this.onToggle_togCfgSound,this),this.btnBack.node.on("click",this.onClick_btnBack,this)},e.prototype.setOnClick_btnBack=function(t){this.onClick_btnBackPlus=t},e.prototype.onClick_btnBack=function(t){this.onClick_btnBackPlus&&this.onClick_btnBackPlus(t)},e.prototype.onToggle_togCfgMusic=function(t){this.gameConfig.configMusic=t.isChecked,this.gameConfig.SaveMusicConfig()},e.prototype.onToggle_togCfgSound=function(t){this.gameConfig.configSound=t.isChecked,this.gameConfig.SaveSoundConfig()},e.prototype.ReloadUserConfig=function(){this.gameConfig=new n.default,this.gameConfig.Load();var t=this.gameConfig.configMusic,e=this.gameConfig.configSound;t?this.togCfgMusic.check():this.togCfgMusic.uncheck(),e?this.togCfgSound.check():this.togCfgSound.uncheck()},__decorate([s(cc.Button)],e.prototype,"btnBack",void 0),__decorate([s(cc.Toggle)],e.prototype,"togCfgMusic",void 0),__decorate([s(cc.Toggle)],e.prototype,"togCfgSound",void 0),__decorate([r],e)}(cc.Component);o.default=a,cc._RF.pop()},{"./GameConfig":"GameConfig"}],GameConfig:[function(t,e,o){"use strict";cc._RF.push(e,"ac26468TD1NJKc7ZXdqNi6E","GameConfig"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./HeroInfoOrigin"),i=t("./SolderInfoBase"),r=cc._decorator,s=r.ccclass,a=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.userFileName="UserFile",e.MAX_HEROS=16,e.ver="20200907bySky006",e.configMusic=!0,e.configSound=!0,e.heros=[],e.tavernLeftHero=null,e.tavernRightHero=null,e.warRound=[],e.piont=0,e.Items=[-1,0,0,0,0,0,0,0],e.GrassMaxLv=0,e.GrassSpeedLv=0,e.HomeHpLv=0,e.MilitarySkills=[],e.soldierLv=[],e.soldierExp=[],e}return __extends(e,t),e.prototype.onLoad=function(){cc.log("GameConfig.onLoad"),this.Load()},e.prototype.Load=function(){var t=JSON.parse(cc.sys.localStorage.getItem(this.userFileName));null==t?this.saveAll():t.ver!=this.ver?this.saveAll():(this.ver=t.ver,this.configMusic=t.ConfigMusic,this.configSound=t.configSound,this.ExtractHeros(t.Heros),this.tavernLeftHero=t.tavernLeftHero,this.tavernRightHero=t.tavernRightHero,this.warRound=t.WarRound,this.piont=t.piont,this.Items=t.Items,this.GrassMaxLv=t.GrassMaxLv,this.GrassSpeedLv=t.GrassSpeedLv,this.HomeHpLv=t.HomeHpLv,this.MilitarySkills=t.MilitarySkills,this.soldierLv=t.soldierLv,this.soldierExp=t.soldierExp)},e.prototype.saveAll=function(){this.SaveVersion(),this.SaveMusicConfig(),this.SaveSoundConfig(),this.SaveHeros(),this.SaveTavernHero(),this.SaveWarRound(),this.SavePiont(),this.SaveItems(),this.SaveCastleData(),this.SaveMilitarySkill(),this.SaveSoldierLv()},e.prototype.addSoldierExp=function(t,e){var o=this.soldierLv[t],n=this.soldierExp[t],r=n+e,s=new i.default(t,o,n).NextExp;r>s?(this.soldierLv[t]++,this.soldierExp[t]=r-s):this.soldierExp[t]=r,this.SaveSoldierLv()},e.prototype.getSoldierLv=function(t){var e=JSON.parse(cc.sys.localStorage.getItem(this.userFileName));return this.soldierLv=e.soldierLv,this.soldierExp=e.soldierExp,this.soldierLv[t]},e.prototype.getSoldierExp=function(t){var e=JSON.parse(cc.sys.localStorage.getItem(this.userFileName));return this.soldierLv=e.soldierLv,this.soldierExp=e.soldierExp,this.soldierExp[t]},e.prototype.SaveSoldierLv=function(){var t=JSON.parse(cc.sys.localStorage.getItem(this.userFileName));null==t&&(t={}),0==this.soldierLv.length&&(this.soldierLv=[1,1,1,1],this.soldierExp=[0,0,0,0]),t.soldierLv=this.soldierLv,t.soldierExp=this.soldierExp,cc.sys.localStorage.setItem(this.userFileName,JSON.stringify(t))},e.prototype.getStarCountOfSkill=function(t){switch(t){case 16:case 17:case 18:case 19:return 2;default:return t%4+1}},e.prototype.setMilitarySkill=function(t,e){this.MilitarySkills[t]=e?this.getStarCountOfSkill(t):0,this.SaveMilitarySkill()},e.prototype.getMilitarySkill=function(t){return this.MilitarySkills[t]},e.prototype.SaveMilitarySkill=function(){var t=JSON.parse(cc.sys.localStorage.getItem(this.userFileName));null==t&&(t={}),null==t.MilitarySkills&&(t.MilitarySkills=this.MilitarySkills),t.MilitarySkills=this.MilitarySkills,cc.sys.localStorage.setItem(this.userFileName,JSON.stringify(t))},e.prototype.isMax_GrassMaxLv=function(){return this.GrassMaxLv>=10},e.prototype.isMax_GrassSpeedLv=function(){return this.GrassSpeedLv>=10},e.prototype.isMax_HomeHpLv=function(){return this.HomeHpLv>=10},e.prototype.Add1_GrassMaxLv=function(){this.GrassMaxLv>=10&&(this.GrassMaxLv=10),this.GrassMaxLv++,this.SaveCastleData()},e.prototype.Add1_GrassSpeedLv=function(){this.GrassSpeedLv>=10&&(this.GrassSpeedLv=10),this.GrassSpeedLv++,this.SaveCastleData()},e.prototype.Add1_HomeHpLv=function(){this.HomeHpLv>=10&&(this.HomeHpLv=10),this.HomeHpLv++,this.SaveCastleData()},e.prototype.SaveCastleData=function(){var t=JSON.parse(cc.sys.localStorage.getItem(this.userFileName));null==t&&(t={}),t.GrassMaxLv=this.GrassMaxLv,t.GrassSpeedLv=this.GrassSpeedLv,t.HomeHpLv=this.HomeHpLv,cc.sys.localStorage.setItem(this.userFileName,JSON.stringify(t))},e.prototype.SetTavernHero=function(t,e){this.tavernLeftHero=null,this.tavernRightHero=null,t&&(this.tavernLeftHero=t.getOrigin()),e&&(this.tavernRightHero=e.getOrigin()),this.SaveTavernHero()},e.prototype.SaveTavernHero=function(){var t=JSON.parse(cc.sys.localStorage.getItem(this.userFileName));null==t&&(t={}),t.tavernLeftHero=this.tavernLeftHero,t.tavernRightHero=this.tavernRightHero,cc.sys.localStorage.setItem(this.userFileName,JSON.stringify(t))},e.prototype.getItemQty=function(t){return this.Items[t]},e.prototype.AddItemQty=function(t,e){-1!=this.Items[t]?this.Items[t]+=e:this.Items[t]=e,this.SaveItems()},e.prototype.ReduceItemQty=function(t,e){this.Items[t]>0&&this.Items[t]-e>=0?this.Items[t]-=e:this.Items[t]=0,this.SaveItems()},e.prototype.SaveItems=function(){var t=JSON.parse(cc.sys.localStorage.getItem(this.userFileName));null==t&&(t={}),null==t.Items&&(t.Items=this.Items),t.Items=this.Items,cc.sys.localStorage.setItem(this.userFileName,JSON.stringify(t))},e.prototype.AddPiontQty=function(t){-1!=this.piont?this.piont+=t:this.piont=t,this.SavePiont()},e.prototype.ReducePiontQty=function(t){this.piont>0&&this.piont-t>=0?this.piont-=t:this.piont=0,this.SavePiont()},e.prototype.SavePiont=function(){var t=JSON.parse(cc.sys.localStorage.getItem(this.userFileName));null==t&&(t={}),t.piont=this.piont,cc.sys.localStorage.setItem(this.userFileName,JSON.stringify(t))},e.prototype.SaveVersion=function(){var t=JSON.parse(cc.sys.localStorage.getItem(this.userFileName));null==t&&(t={}),t.ver=this.ver,cc.sys.localStorage.setItem(this.userFileName,JSON.stringify(t))},e.prototype.SaveWarRound=function(){var t=JSON.parse(cc.sys.localStorage.getItem(this.userFileName));if(null==t&&(t={}),!t.WarRound)for(var e=0;e<147;e++)this.warRound[e]=0;t.WarRound=this.warRound,cc.sys.localStorage.setItem(this.userFileName,JSON.stringify(t))},e.prototype.ExtractHeros=function(t){var e=!1;if(null!=t){var o=t.length;if(o>=0&&o<this.MAX_HEROS){for(var i=0;i<o;i++)this.heros[i]=new n.default(t[i].ID,t[i].StartLv,t[i].Lv,t[i].Exp);e=!0}}return e},e.prototype.SaveMusicConfig=function(){var t=JSON.parse(cc.sys.localStorage.getItem(this.userFileName));null==t&&(t={}),t.ConfigMusic=this.configMusic,cc.sys.localStorage.setItem(this.userFileName,JSON.stringify(t))},e.prototype.SaveSoundConfig=function(){var t=JSON.parse(cc.sys.localStorage.getItem(this.userFileName));null==t&&(t={}),t.configSound=this.configSound,cc.sys.localStorage.setItem(this.userFileName,JSON.stringify(t))},e.prototype.SaveHeros=function(){var t=JSON.parse(cc.sys.localStorage.getItem(this.userFileName));null==t&&(t={}),t.Heros=this.heros,cc.sys.localStorage.setItem(this.userFileName,JSON.stringify(t))},e.prototype.AddHero=function(t,e){var o=t.getOrigin(),n=!1;if(null!=o){var i=this.heros.length;if(i<this.MAX_HEROS){if(0==this.heros.filter(function(t){return t.ID==this},o.ID).length)this.heros[i]=o,n=!0;else if(e){var r=this.FindHero(o);this.heros[r]=o,n=!0,cc.log("Force Recruit~~~")}}else cc.log("Reach Max@@")}return n},e.prototype.FindHero=function(t){return this.heros.findIndex(function(t){return t.ID==this},t.ID)},e.prototype.DeleteHero=function(t){var e=this.FindHero(t);return-1!=e&&this.heros.splice(e,1),!0},__decorate([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{"./HeroInfoOrigin":"HeroInfoOrigin","./SolderInfoBase":"SolderInfoBase"}],GeneralBG:[function(t,e,o){"use strict";cc._RF.push(e,"fbcceDxD3BM55BxVAwQIWXD","GeneralBG"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Screen/MM_Transition"),i=cc._decorator,r=i.ccclass,s=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeBtnConfirm=null,e.NodeBtnCancel=null,e.isShowSelection=!0,e.isShowConfirm=!0,e.onClick_BtnConfirmPlus=null,e.onClick_BtnBackPlus=null,e}return __extends(e,t),e.prototype.onLoad=function(){cc.log("GeneralBG onLoad"),this.isShowSelection?(this.NodeBtnConfirm.active=this.isShowConfirm,this.NodeBtnCancel.active=!0):(this.NodeBtnConfirm.active=!1,this.NodeBtnCancel.active=!1),this.NodeBtnConfirm.getComponent("cc.Button").node.on("click",this.onClick_BtnConfirm,this),this.NodeBtnCancel.getComponent("cc.Button").node.on("click",this.onClick_BtnCancel,this)},e.prototype.start=function(){cc.log("GeneralBG start")},e.prototype.setOnClick_BtnConfirm=function(t){this.onClick_BtnConfirmPlus=t},e.prototype.setOnClick_BtnBack=function(t){this.onClick_BtnBackPlus=t},e.prototype.onClick_BtnConfirm=function(t){this.onClick_BtnConfirmPlus&&this.onClick_BtnConfirmPlus(t)},e.prototype.onClick_BtnCancel=function(t){this.onClick_BtnBackPlus&&this.onClick_BtnBackPlus(t),(new n.default).reqBack()},__decorate([s(cc.Node)],e.prototype,"NodeBtnConfirm",void 0),__decorate([s(cc.Node)],e.prototype,"NodeBtnCancel",void 0),__decorate([s],e.prototype,"isShowSelection",void 0),__decorate([s],e.prototype,"isShowConfirm",void 0),__decorate([r],e)}(cc.Component);o.default=a,cc._RF.pop()},{"../Screen/MM_Transition":"MM_Transition"}],HPControl:[function(t,e,o){"use strict";cc._RF.push(e,"6c6ba9MNfhCLIA0+Xdts+Au","HPControl"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressHeroHP=null,e}return __extends(e,t),e.prototype.setProgress=function(t){this.progressHeroHP.progress=t},__decorate([r(cc.ProgressBar)],e.prototype,"progressHeroHP",void 0),__decorate([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],HeroControler:[function(t,e,o){"use strict";cc._RF.push(e,"78012TE4/BBLKkeTYbFizrk","HeroControler"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),__decorate([r(cc.Label)],e.prototype,"label",void 0),__decorate([r],e.prototype,"text",void 0),__decorate([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],HeroInfoBase:[function(t,e,o){"use strict";cc._RF.push(e,"f89776cXOxF5L5h0P6+qxHY","HeroInfoBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./HeroInfoOrigin"),i=cc._decorator,r=(i.ccclass,i.property,function(t){function e(e,o,n,i){var r=t.call(this,e,o,n,i)||this;switch(r.Name="\u4e0d\u77e5\u706b\u821e",r.Class=0,r.BaseCON=0,r.BaseSTR=0,r.BaseAGI=0,r.CON=0,r.STR=0,r.AGI=0,r.HP=0,r.ATK=0,r.AVD=0,r.CRI=0,r.NextExp=2e3,r.HD=10,e){case 0:r.setBaseData("\u5289\u5099",1,50,45,40);break;case 1:r.setBaseData("\u95dc\u7fbd",3,50,60,50);break;case 2:r.setBaseData("\u5f35\u98db",2,50,50,55);break;case 3:r.setBaseData("\u9ec3\u5fe0",4,30,25,60);break;case 4:r.setBaseData("\u8af8\u845b\u4eae",5,35,30,55);break;case 5:r.setBaseData("\u9f90\u7d71",5,35,30,50);break;case 6:r.setBaseData("\u9b4f\u5ef6",3,55,70,50);break;case 7:r.setBaseData("\u59dc\u7dad",2,60,60,60);break;case 8:r.setBaseData("\u99ac\u8d85",3,70,75,65);break;case 9:r.setBaseData("\u8d99\u96f2",2,70,70,70);break;case 10:r.setBaseData("\u5f35\u89d2",5,30,30,30);break;case 11:r.setBaseData("\u8463\u5353",1,50,50,50);break;case 12:r.setBaseData("\u83ef\u96c4",3,55,70,60);break;case 13:r.setBaseData("\u5442\u5e03",2,80,80,30);break;case 14:r.setBaseData("\u5f35\u907c",3,70,75,40);break;case 15:r.setBaseData("\u90ed\u5609",5,40,50,35);break;case 16:r.setBaseData("\u8881\u7d39",1,60,60,50);break;case 17:r.setBaseData("\u8a31\u891a",1,80,65,70);break;case 18:r.setBaseData("\u5f35\u981c",3,75,75,50);break;case 19:r.setBaseData("\u66f9\u4ec1",3,75,75,45);break;case 20:r.setBaseData("\u590f\u4faf\u60c7",3,80,75,40);break;case 21:r.setBaseData("\u66f9\u64cd",1,70,65,60);break;case 22:r.setBaseData("\u590f\u4faf\u6df5",2,70,65,45);break;case 23:r.setBaseData("\u5b5f\u7372",1,80,60,50);break;case 24:r.setBaseData("\u9678\u905c",5,30,35,60);break;case 25:r.setBaseData("\u5442\u8499",1,70,60,60);break;case 26:r.setBaseData("\u5b6b\u6b0a",5,40,40,60);break;case 27:r.setBaseData("\u53f8\u99ac\u61ff",5,50,40,65)}return r}return __extends(e,t),e.newHeroInfoBase=function(t){return new e(t.ID,t.StartLv,t.Lv,t.Exp)},e.prototype.getOrigin=function(){return new n.default(this.ID,this.StartLv,this.Lv,this.Exp)},e.prototype.setBaseData=function(t,e,o,n,i){this.Name=t,this.Class=e,this.BaseCON=o,this.BaseSTR=n,this.BaseAGI=i,this.CON=this.param(this.BaseCON),this.STR=this.param(this.BaseSTR),this.AGI=this.param(this.BaseAGI),this.HP=this.paramHP(this.CON),this.ATK=this.paramATK(this.STR),this.CRI=this.AVD=this.paramAVD_CRI(this.AGI),this.NextExp=100*(this.Lv*this.Lv+this.Lv)},e.prototype.vInit=function(t){return this.HD*t*(8+2*(this.StartLv+1))/100},e.prototype.param=function(t){return this.vInit(t)*(9+this.Lv)/10},e.prototype.paramHP=function(t){return 20*t+500},e.prototype.paramATK=function(t){return 2*t+50},e.prototype.paramAVD_CRI=function(t){var e=t/1500;return e>1&&(e=1),e},e}(n.default));o.default=r,cc._RF.pop()},{"./HeroInfoOrigin":"HeroInfoOrigin"}],HeroInfoOrigin:[function(t,e,o){"use strict";cc._RF.push(e,"11320yJQctBV4SVa8FE6Sab","HeroInfoOrigin"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(){function t(t,e,o,n){this.ID=-1,this.StartLv=0,this.Lv=0,this.Exp=300,this.ID=t,this.StartLv=e,this.Lv=o,this.Exp=n}return __decorate([i],t)}());o.default=r,cc._RF.pop()},{}],HeroInfo:[function(t,e,o){"use strict";cc._RF.push(e,"0b61bG0Ag5KF6leVlzJrFSJ","HeroInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./HeroInfoBase"),i=cc._decorator,r=i.ccclass,s=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeRole=null,e.PrefabLvBu=null,e.PrefabZhangJiao=null,e.lableHP=null,e.lableATK=null,e.lableAVD=null,e.lableCRI=null,e.lableLV=null,e.lableCON=null,e.lableSTR=null,e.lableAGI=null,e.lableName=null,e.isNameDefault=!0,e.lableExp=null,e.nodeExpBg=null,e.nodeExpRate=null,e.nodeStar1=null,e.nodeStar2=null,e.nodeStar3=null,e.nodeStar4=null,e.nodeStar5=null,e.nodeInfantry=null,e.nodeArcher=null,e.nodeWizard=null,e.nodeCavalryman=null,e.nodeSpearman=null,e.heroBase=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.NodeRole.on("click",this.onClick_NodeRole,this),this.heroBase&&this.updateData()},e.prototype.setHeroInfo=function(t){this.heroBase=n.default.newHeroInfoBase(t)},e.prototype.updateData=function(){if(this.lableHP.string=Math.round(this.heroBase.HP)+"",this.lableATK.string=Math.round(this.heroBase.ATK)+"",this.lableAVD.string=Math.round(100*this.heroBase.AVD)+"%",this.lableCRI.string=Math.round(100*this.heroBase.CRI)+"%",null!=this.lableLV&&(this.lableLV.string=this.heroBase.Lv+""),this.lableCON.string=Math.floor(this.heroBase.CON)+"",this.lableSTR.string=Math.floor(this.heroBase.STR)+"",this.lableAGI.string=Math.floor(this.heroBase.AGI)+"",null!=this.lableExp&&(this.lableExp.string=this.heroBase.Exp+"/"+this.heroBase.NextExp),null!=this.nodeExpRate&&(this.nodeExpRate.scaleX=this.heroBase.Exp/this.heroBase.NextExp),this.isNameDefault){for(var t="",e=0;e<this.heroBase.Name.length;e++)t=t+this.heroBase.Name.substring(e,e+1)+"\n";this.lableName.string=t}else this.lableName.string=this.heroBase.Name;if(this.nodeStar1.active=!1,this.nodeStar2.active=!1,this.nodeStar3.active=!1,this.nodeStar4.active=!1,this.nodeStar5.active=!1,0==this.heroBase.StartLv?this.nodeStar1.active=!0:1==this.heroBase.StartLv?this.nodeStar2.active=!0:2==this.heroBase.StartLv?this.nodeStar3.active=!0:3==this.heroBase.StartLv?this.nodeStar4.active=!0:4==this.heroBase.StartLv&&(this.nodeStar5.active=!0),this.nodeInfantry.active=!1,this.nodeArcher.active=!1,this.nodeWizard.active=!1,this.nodeCavalryman.active=!1,this.nodeSpearman.active=!1,1==this.heroBase.Class?this.nodeInfantry.active=!0:4==this.heroBase.Class?this.nodeArcher.active=!0:5==this.heroBase.Class?this.nodeWizard.active=!0:3==this.heroBase.Class?this.nodeCavalryman.active=!0:2==this.heroBase.Class&&(this.nodeSpearman.active=!0),this.NodeRole.removeAllChildren(),this.heroBase.ID%2==0){var o=cc.instantiate(this.PrefabLvBu);this.NodeRole.addChild(o)}else o=cc.instantiate(this.PrefabZhangJiao),this.NodeRole.addChild(o)},e.prototype.onClick_NodeRole=function(t){cc.log("onClick_NodeRole "+t);for(var e=this.NodeRole.getComponentInChildren("cc.Animation"),o=e.getClips(),n=0;n<o.length;n++){var i=o[n];if(e.getAnimationState(i.name),i==e.currentClip){cc.log(i.name+" isPlaying"),n+1<o.length?e.play(o[n+1].name):e.play(o[0].name);break}}},__decorate([s(cc.Node)],e.prototype,"NodeRole",void 0),__decorate([s(cc.Prefab)],e.prototype,"PrefabLvBu",void 0),__decorate([s(cc.Prefab)],e.prototype,"PrefabZhangJiao",void 0),__decorate([s(cc.Label)],e.prototype,"lableHP",void 0),__decorate([s(cc.Label)],e.prototype,"lableATK",void 0),__decorate([s(cc.Label)],e.prototype,"lableAVD",void 0),__decorate([s(cc.Label)],e.prototype,"lableCRI",void 0),__decorate([s(cc.Label)],e.prototype,"lableLV",void 0),__decorate([s(cc.Label)],e.prototype,"lableCON",void 0),__decorate([s(cc.Label)],e.prototype,"lableSTR",void 0),__decorate([s(cc.Label)],e.prototype,"lableAGI",void 0),__decorate([s(cc.Label)],e.prototype,"lableName",void 0),__decorate([s(cc.Boolean)],e.prototype,"isNameDefault",void 0),__decorate([s(cc.Label)],e.prototype,"lableExp",void 0),__decorate([s(cc.Node)],e.prototype,"nodeExpBg",void 0),__decorate([s(cc.Node)],e.prototype,"nodeExpRate",void 0),__decorate([s(cc.Node)],e.prototype,"nodeStar1",void 0),__decorate([s(cc.Node)],e.prototype,"nodeStar2",void 0),__decorate([s(cc.Node)],e.prototype,"nodeStar3",void 0),__decorate([s(cc.Node)],e.prototype,"nodeStar4",void 0),__decorate([s(cc.Node)],e.prototype,"nodeStar5",void 0),__decorate([s(cc.Node)],e.prototype,"nodeInfantry",void 0),__decorate([s(cc.Node)],e.prototype,"nodeArcher",void 0),__decorate([s(cc.Node)],e.prototype,"nodeWizard",void 0),__decorate([s(cc.Node)],e.prototype,"nodeCavalryman",void 0),__decorate([s(cc.Node)],e.prototype,"nodeSpearman",void 0),__decorate([r],e)}(cc.Component);o.default=a,cc._RF.pop()},{"./HeroInfoBase":"HeroInfoBase"}],HeroSelect:[function(t,e,o){"use strict";cc._RF.push(e,"69f01PP1uBB/aU7jLQF98Sm","HeroSelect"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./HeroInfoBase"),i=cc._decorator,r=i.ccclass,s=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Heros=[],e.PrefabSelected=null,e.FrameEmpty=null,e.FrameGreen=null,e.FrameGray=null,e.FrameBlue=null,e.FramePurple=null,e.FrameYellow=null,e.FramePortraits=[],e.NodePortraits=[],e.selectedIndex=0,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.NodePortraits.forEach(function(e){e.on("click",t.onClick_NodePortrait,t)}),this.prefabSelected=cc.instantiate(this.PrefabSelected),this.NodePortraits[0].addChild(this.prefabSelected);for(var e=0;e<this.Heros.length;e++){var o=this.Heros[e],n=this.NodePortraits[e],i=this.FramePortraits[o.ID],r=this.FrameGray;1==o.StartLv?r=this.FrameGreen:2==o.StartLv?r=this.FrameBlue:3==o.StartLv?r=this.FramePurple:4==o.StartLv&&(r=this.FrameYellow),n.getComponent("cc.Sprite").spriteFrame=r;var s=n.getChildByName("Portrait").getComponent("cc.Sprite");s.spriteFrame=i,s.enabled=!0}},e.prototype.setOnClick_NodePortraitPlus=function(t){this.onClick_NodePortraitPlus=t},e.prototype.onClick_NodePortrait=function(t){cc.log("onClick_NodePortrait "+t);for(var e=-1,o=0;o<this.NodePortraits.length;o++)if(this.NodePortraits[o].getComponent("cc.Button")==t){e=o;break}cc.log("onClick_NodePortrait index="+e),-1!=e&&e<this.Heros.length&&(this.NodePortraits[this.selectedIndex].removeChild(this.prefabSelected),this.NodePortraits[e].addChild(this.prefabSelected),this.selectedIndex=e,this.onClick_NodePortraitPlus&&this.onClick_NodePortraitPlus(t,e))},__decorate([s([n.default])],e.prototype,"Heros",void 0),__decorate([s(cc.Prefab)],e.prototype,"PrefabSelected",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"FrameEmpty",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"FrameGreen",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"FrameGray",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"FrameBlue",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"FramePurple",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"FrameYellow",void 0),__decorate([s([cc.SpriteFrame])],e.prototype,"FramePortraits",void 0),__decorate([s([cc.Node])],e.prototype,"NodePortraits",void 0),__decorate([r],e)}(cc.Component);o.default=a,cc._RF.pop()},{"./HeroInfoBase":"HeroInfoBase"}],LevelConfig:[function(t,e,o){"use strict";cc._RF.push(e,"b3244YJcOdNE7ECPLv2YIfy","LevelConfig"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./Battle"),i=cc._decorator,r=i.ccclass,s=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fileName="LevelConfig",e.Battles=[],e}return __extends(e,t),e.getBattle=function(t){switch(t){case 0:return n.default.newBattle(t,t%3,"\u9ec3\u5dfe\u4e4b\u4e82","Avg",10,-1,-1,"senlin1.png");case 1:return n.default.newBattle(t,t%3,"\u9ec3\u5dfe\u4e4b\u4e82","Avg",10,10,-1,"senlin1.png");case 2:return n.default.newBattle(t,t%3,"\u9ec3\u5dfe\u4e4b\u4e82","Avg",10,10,1e3,"senlin1.png");case 3:return n.default.newBattle(t,t%3,"\u8463\u5353\u53db\u4e82","Infantry",10,-1,-1,"shamo1.png");case 4:return n.default.newBattle(t,t%3,"\u8463\u5353\u53db\u4e82","Infantry",10,11,-1,"shamo1.png");case 5:return n.default.newBattle(t,t%3,"\u8463\u5353\u53db\u4e82","Infantry",10,11,1e3,"shamo1.png")}},__decorate([s],e.prototype,"fileName",void 0),__decorate([s],e.prototype,"Battles",void 0),__decorate([r],e)}(cc.Component);o.default=a,cc._RF.pop()},{"./Battle":"Battle"}],MM_01_01_01:[function(t,e,o){"use strict";cc._RF.push(e,"03875QKiLBGtIXRhrWBeZOv","MM_01_01_01"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./MM_Transition"),i=t("../Model/GameConfig"),r=cc._decorator,s=r.ccclass,a=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeLaunch=null,e.NodeMenu=null,e.showStartAni=!1,e.btnStart=null,e.btnSetting=null,e.btnHelp=null,e.btnAbout=null,e.btnRecharge=null,e.btnShop=null,e.btnMore=null,e.btnLeave=null,e.trans=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.trans=new n.default,this.NodeLaunch.getComponent("cc.Button").node.on("click",this.onClick_Launch,this),this.btnStart.node.on("click",this.onClick_btnStart,this),this.btnSetting.node.on("click",this.onClick_btnSetting,this),this.btnHelp.node.on("click",this.onClick_btnHelp,this),this.btnAbout.node.on("click",this.onClick_btnAbout,this),this.btnRecharge.node.on("click",this.onClick_btnRecharge,this),this.btnShop.node.on("click",this.onClick_btnShop,this),this.btnMore.node.on("click",this.onClick_btnMore,this),this.btnLeave.node.on("click",this.onClick_btnLeave,this)},e.prototype.start=function(){if(this.showStartAni||(this.NodeLaunch.active=!1,this.NodeMenu.active=!0),cc.sys.platform==cc.sys.WECHAT_GAME);else{var t=window.document.createElement("script");t.src="https://hm.baidu.com/hm.js?2a304e91d6eab9ab5ea144c17dc786b4";var e=window.document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}},e.prototype.onClick_Launch=function(){cc.log("onClick_Launch"),this.showStartAni=!0;var t=this.NodeLaunch.getComponent(cc.Animation);t.play("StartGame"),t.on("finished",this.onFinished_StartGame,this)},e.prototype.onFinished_StartGame=function(){cc.log("onFinished_StartGame"),this.NodeLaunch.active=!1,this.NodeMenu.active=!0},e.prototype.onFinished_Menu=function(){cc.log("onFinished_Menu"),this.NodeMenu.active=!0},e.prototype.onClick_btnStart=function(){cc.log("onClick_btnStart"),(new i.default).Load(),this.trans.reqForward("MM_02_01_01")},e.prototype.onClick_btnSetting=function(){cc.log("onClick_btnSetting"),this.trans.reqForward("MM_08_03_01")},e.prototype.onClick_btnHelp=function(){cc.log("onClick_btnHelp"),this.trans.reqForward("MM_08_02_01")},e.prototype.onClick_btnAbout=function(){cc.log("onClick_btnAbout"),this.trans.reqForward("MM_08_05_01")},e.prototype.onClick_btnRecharge=function(){cc.log("onClick_btnRecharge"),this.trans.reqForward("MM_08_01_01")},e.prototype.onClick_btnShop=function(){cc.log("onClick_btnShop"),this.trans.reqForward("MM_08_04_01")},e.prototype.onClick_btnMore=function(){cc.log("onClick_btnMore")},e.prototype.onClick_btnLeave=function(){cc.log("onClick_btnLeave")},__decorate([a(cc.Node)],e.prototype,"NodeLaunch",void 0),__decorate([a(cc.Node)],e.prototype,"NodeMenu",void 0),__decorate([a],e.prototype,"showStartAni",void 0),__decorate([a(cc.Button)],e.prototype,"btnStart",void 0),__decorate([a(cc.Button)],e.prototype,"btnSetting",void 0),__decorate([a(cc.Button)],e.prototype,"btnHelp",void 0),__decorate([a(cc.Button)],e.prototype,"btnAbout",void 0),__decorate([a(cc.Button)],e.prototype,"btnRecharge",void 0),__decorate([a(cc.Button)],e.prototype,"btnShop",void 0),__decorate([a(cc.Button)],e.prototype,"btnMore",void 0),__decorate([a(cc.Button)],e.prototype,"btnLeave",void 0),__decorate([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../Model/GameConfig":"GameConfig","./MM_Transition":"MM_Transition"}],MM_02_01_01:[function(t,e,o){"use strict";cc._RF.push(e,"88c89XW62xCUb5eI6dZsrhy","MM_02_01_01"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./MM_Transition"),i=cc._decorator,r=i.ccclass,s=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BtnCastle=null,e.BtnMilitaryService=null,e.BtnBattleMap=null,e.BtnCommanderTent=null,e.BtnBarracks=null,e.BtnTavern=null,e.BtnMarket=null,e.trans=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.trans=new n.default,this.BtnMarket.node.on("click",this.onClick_btnMarket,this),this.BtnTavern.node.on("click",this.onClick_btnTavern,this),this.BtnBarracks.node.on("click",this.onClick_btnBarracks,this),this.BtnCommanderTent.node.on("click",this.onClick_btnCommanderTent,this),this.BtnBattleMap.node.on("click",this.onClick_btnBattleMap,this),this.BtnMilitaryService.node.on("click",this.onClick_btnMilitaryService,this),this.BtnCastle.node.on("click",this.onClick_btnCastle,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onDestroy=function(){cc.systemEvent.targetOff(this)},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.trans.reqBack()}},e.prototype.onClick_btnMarket=function(){cc.log("onClick_btnMarket clicked"),this.trans.reqForward("MM_08_04_01")},e.prototype.onClick_btnTavern=function(){cc.log("onClick_btnTavern clicked"),this.trans.reqForward("MM_03_06_01")},e.prototype.onClick_btnBarracks=function(){cc.log("onClick_btnBarracks clicked"),this.trans.reqForward("MM_03_05_01")},e.prototype.onClick_btnCommanderTent=function(){cc.log("onClick_btnCommanderTent clicked"),this.trans.reqForward("MM_03_04_01")},e.prototype.onClick_btnBattleMap=function(){cc.log("onClick_btnBattleMap clicked"),this.trans.reqForward("MM_03_03_01")},e.prototype.onClick_btnMilitaryService=function(){cc.log("onClick_btnMilitaryService clicked"),this.trans.reqForward("MM_03_02_01")},e.prototype.onClick_btnCastle=function(){cc.log("onClick_btnTaishou clicked"),this.trans.reqForward("MM_03_01_01")},__decorate([s(cc.Button)],e.prototype,"BtnCastle",void 0),__decorate([s(cc.Button)],e.prototype,"BtnMilitaryService",void 0),__decorate([s(cc.Button)],e.prototype,"BtnBattleMap",void 0),__decorate([s(cc.Button)],e.prototype,"BtnCommanderTent",void 0),__decorate([s(cc.Button)],e.prototype,"BtnBarracks",void 0),__decorate([s(cc.Button)],e.prototype,"BtnTavern",void 0),__decorate([s(cc.Button)],e.prototype,"BtnMarket",void 0),__decorate([r],e)}(cc.Component);o.default=a,cc._RF.pop()},{"./MM_Transition":"MM_Transition"}],MM_03_01_01:[function(t,e,o){"use strict";cc._RF.push(e,"301d04P8pRCmZU+CuLuAsjC","MM_03_01_01"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Model/GeneralBG"),i=t("../Model/CastleSelection"),r=t("../Model/MessageDialog"),s=t("../Model/GameConfig"),a=t("./MM_Transition"),c=cc._decorator,l=c.ccclass,d=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeGeneralBG=null,e.labDiamondCount=null,e.labNowGrassMax=null,e.labAfterGrassMax=null,e.labNowGrassSpeed=null,e.labAfterGrassSpeed=null,e.labNowHomeHp=null,e.labAfterHomeHp=null,e.progressGrassMax=null,e.progressGrassSpeed=null,e.progressHomeHp=null,e.NodeGrassMax=null,e.NodeGrassSpeed=null,e.NodeHomeHp=null,e.gameConfig=null,e.trans=null,e.GeneralBG=null,e.GrassMax=null,e.GrassSpeed=null,e.HomeHp=null,e.ItemID_Diamond=1,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.trans=new a.default,this.gameConfig=new s.default,this.gameConfig.Load(),this.GeneralBG=this.NodeGeneralBG.getComponent(n.default),this.GeneralBG.isShowConfirm=!1,this.GrassMax=this.NodeGrassMax.getComponent(i.default),this.GrassSpeed=this.NodeGrassSpeed.getComponent(i.default),this.HomeHp=this.NodeHomeHp.getComponent(i.default),this.GrassMax.setOnClick_LeftUnselected(function(){t.onClick_NodeGrassMax_Left()}),this.GrassMax.setOnClick_RightUnselected(function(){t.onClick_NodeGrassMax_Right()}),this.GrassSpeed.setOnClick_LeftUnselected(function(){t.onClick_NodeGrassSpeed_Left()}),this.GrassSpeed.setOnClick_RightUnselected(function(){t.onClick_NodeGrassSpeed_Right()}),this.HomeHp.setOnClick_LeftUnselected(function(){t.onClick_NodeHomeHp_Left()}),this.HomeHp.setOnClick_RightUnselected(function(){t.onClick_NodeHomeHp_Right()}),this.labDiamondCount.string=""+this.gameConfig.Items[this.ItemID_Diamond],this.labAfterGrassMax.string="??",this.labAfterGrassSpeed.string="??",this.labAfterHomeHp.string="??",this.labNowGrassMax.string="??",this.labNowGrassSpeed.string="??",this.labNowHomeHp.string="??",this.progressGrassMax.progress=this.gameConfig.GrassMaxLv/10,this.progressGrassSpeed.progress=this.gameConfig.GrassSpeedLv/10,this.progressHomeHp.progress=this.gameConfig.HomeHpLv/10,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onDestroy=function(){cc.systemEvent.targetOff(this)},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.trans.reqBack()}},e.prototype.onClick_NodeGrassMax_Left=function(){this.GrassSpeed.setFocus(!1),this.HomeHp.setFocus(!1),this.GrassMax.flash(),this.GrassSpeed.flash(),this.HomeHp.flash()},e.prototype.onClick_NodeGrassMax_Right=function(){var t=this;this.onClick_NodeGrassMax_Left(),this.gameConfig.isMax_GrassMaxLv()?r.default.showMsg_1btn(this.node,"\u5df2\u6eff\u7d1a",null):this.gameConfig.Items[this.ItemID_Diamond]>0?r.default.showMsg_2btn(this.node,"\u78ba\u5b9a\u6d88\u80171\u500b\u947d\u77f3\u5347\u7d1a\u7ce7\u8349\u4e0a\u9650\uff1f",function(){t.onClick_doGrassMaxLvUp()},null,null,null):r.default.showMsg_2btn(this.node,"\u947d\u77f3\u4e0d\u8db3\u662f\u5426\u524d\u5f80\u5546\u57ce\u8cfc\u8cb7\uff1f",function(){t.onClick_GotoCharge()},null,null,null)},e.prototype.onClick_doGrassMaxLvUp=function(){this.gameConfig.ReduceItemQty(this.ItemID_Diamond,1),this.labDiamondCount.string=""+this.gameConfig.Items[this.ItemID_Diamond],this.gameConfig.Add1_GrassMaxLv(),this.progressGrassMax.progress=this.gameConfig.GrassMaxLv/10},e.prototype.onClick_NodeGrassSpeed_Left=function(){this.GrassMax.setFocus(!1),this.HomeHp.setFocus(!1),this.GrassMax.flash(),this.GrassSpeed.flash(),this.HomeHp.flash()},e.prototype.onClick_NodeGrassSpeed_Right=function(){var t=this;this.onClick_NodeGrassSpeed_Left(),this.gameConfig.isMax_GrassSpeedLv()?r.default.showMsg_1btn(this.node,"\u5df2\u6eff\u7d1a",null):this.gameConfig.Items[this.ItemID_Diamond]>0?r.default.showMsg_2btn(this.node,"\u78ba\u5b9a\u6d88\u80171\u500b\u947d\u77f3\u5347\u7d1a\u7ce7\u8349\u6062\u5fa9\u901f\u5ea6\uff1f",function(){t.onClick_doGrassSpeedLvUp()},null,null,null):r.default.showMsg_2btn(this.node,"\u947d\u77f3\u4e0d\u8db3\u662f\u5426\u524d\u5f80\u5546\u57ce\u8cfc\u8cb7\uff1f",function(){t.onClick_GotoCharge()},null,null,null)},e.prototype.onClick_doGrassSpeedLvUp=function(){this.gameConfig.ReduceItemQty(this.ItemID_Diamond,1),this.labDiamondCount.string=""+this.gameConfig.Items[this.ItemID_Diamond],this.gameConfig.Add1_GrassSpeedLv(),this.progressGrassSpeed.progress=this.gameConfig.GrassSpeedLv/10},e.prototype.onClick_NodeHomeHp_Left=function(){this.GrassSpeed.setFocus(!1),this.GrassMax.setFocus(!1),this.GrassSpeed.flash(),this.GrassMax.flash(),this.HomeHp.flash()},e.prototype.onClick_NodeHomeHp_Right=function(){var t=this;this.onClick_NodeHomeHp_Left(),this.gameConfig.isMax_HomeHpLv()?r.default.showMsg_1btn(this.node,"\u5df2\u6eff\u7d1a",null):this.gameConfig.Items[this.ItemID_Diamond]>0?r.default.showMsg_2btn(this.node,"\u78ba\u5b9a\u6d88\u80171\u500b\u947d\u77f3\u5347\u7d1a\u8ecd\u71df\u5805\u56fa\u5ea6\uff1f",function(){t.onClick_doHomeHpLvUp()},null,null,null):r.default.showMsg_2btn(this.node,"\u947d\u77f3\u4e0d\u8db3\u662f\u5426\u524d\u5f80\u5546\u57ce\u8cfc\u8cb7\uff1f",function(){t.onClick_GotoCharge()},null,null,null)},e.prototype.onClick_doHomeHpLvUp=function(){this.gameConfig.ReduceItemQty(this.ItemID_Diamond,1),this.labDiamondCount.string=""+this.gameConfig.Items[this.ItemID_Diamond],this.gameConfig.Add1_HomeHpLv(),this.progressHomeHp.progress=this.gameConfig.HomeHpLv/10},e.prototype.onClick_GotoCharge=function(){this.trans.reqForward("MM_08_04_01")},__decorate([d(cc.Node)],e.prototype,"NodeGeneralBG",void 0),__decorate([d(cc.Label)],e.prototype,"labDiamondCount",void 0),__decorate([d(cc.Label)],e.prototype,"labNowGrassMax",void 0),__decorate([d(cc.Label)],e.prototype,"labAfterGrassMax",void 0),__decorate([d(cc.Label)],e.prototype,"labNowGrassSpeed",void 0),__decorate([d(cc.Label)],e.prototype,"labAfterGrassSpeed",void 0),__decorate([d(cc.Label)],e.prototype,"labNowHomeHp",void 0),__decorate([d(cc.Label)],e.prototype,"labAfterHomeHp",void 0),__decorate([d(cc.ProgressBar)],e.prototype,"progressGrassMax",void 0),__decorate([d(cc.ProgressBar)],e.prototype,"progressGrassSpeed",void 0),__decorate([d(cc.ProgressBar)],e.prototype,"progressHomeHp",void 0),__decorate([d(cc.Node)],e.prototype,"NodeGrassMax",void 0),__decorate([d(cc.Node)],e.prototype,"NodeGrassSpeed",void 0),__decorate([d(cc.Node)],e.prototype,"NodeHomeHp",void 0),__decorate([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../Model/CastleSelection":"CastleSelection","../Model/GameConfig":"GameConfig","../Model/GeneralBG":"GeneralBG","../Model/MessageDialog":"MessageDialog","./MM_Transition":"MM_Transition"}],MM_03_02_01:[function(t,e,o){"use strict";cc._RF.push(e,"981ceVrsWNF1renvk4mUIr/","MM_03_02_01"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./MM_Transition"),i=t("../Model/MilitarySkill"),r=t("../Model/GameConfig"),s=t("../Model/MessageDialog"),a=cc._decorator,c=a.ccclass,l=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labTotalStars=null,e.labRemainStar=null,e.btnReset=null,e.skills=[],e.gamecfg=null,e.trans=null,e.TotalStar=0,e.UsedStar=0,e.RemainStar=0,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.trans=new n.default,this.gamecfg=new r.default,this.gamecfg.Load(),this.btnReset.on("click",function(){t.onClick_reset()},this);for(var e=function(e){var n=o.skills[e];n.node.on("click",function(){t.onClick_skills(e,n)},o)},o=this,i=0;i<this.skills.length;i++)e(i);this.flash(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onDestroy=function(){cc.systemEvent.targetOff(this)},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.trans.reqBack()}},e.prototype.flash=function(){var t=this.gamecfg.warRound;this.TotalStar=0;for(var e=0;e<t.length;e++){var o=t[e];o<=0||(this.TotalStar+=o)}for(this.labTotalStars.string=""+this.TotalStar,this.UsedStar=0,e=0;e<this.skills.length;e++){var n=this.skills[e],i=this.gamecfg.getMilitarySkill(e);if(n.setOn(!1),i>0){n.setOn(!0);var r=this.gamecfg.getStarCountOfSkill(e);this.UsedStar+=r}n.flash()}this.RemainStar=this.TotalStar-this.UsedStar,this.labRemainStar.string=""+this.RemainStar},e.prototype.onClick_skills=function(t,e){var o=this;if(cc.log("onClick_skills "+t+" "+e.node.name),!e.isOn)if(t%4==0||this.skills[t-1].isOn){var n=this.gamecfg.getStarCountOfSkill(t);this.RemainStar>=n?s.default.showMsg_2btn(this.node,"\u78ba\u5b9a\u8981\u6d88\u8017"+n+"\u500b\u8a55\u661f\u5347\u7d1a\uff1f",function(){o.onClick_skills_Yes(t)},null,null,null):s.default.showMsg_1btn(this.node,"\u8a55\u661f\u4e0d\u8db3",null)}else s.default.showMsg_1btn(this.node,"\u672a\u9054\u5230\u689d\u4ef6\uff0c\u8acb\u5148\u89e3\u9396\u524d\u7f6e\u6280\u80fd\u3002",null)},e.prototype.onClick_skills_Yes=function(t){cc.log("onClick_skills_Yes "+t),this.gamecfg.setMilitarySkill(t,!0),this.flash()},e.prototype.onClick_reset=function(){var t=this;cc.log("onClick_reset "),this.gamecfg.piont>=50?s.default.showMsg_2btn(this.node,"\u78ba\u5b9a\u8981\u6d88\u801750\u500b\u611b\u8c46\u6d17\u9ede\uff1f",function(){t.onClick_reset_Yes()},null,null,null):s.default.showMsg_2btn(this.node,"\u9ede\u6578\u4e0d\u8db3\u662f\u5426\u5145\u503c",function(){t.onClick_GotoCharge()},null,null,null)},e.prototype.onClick_reset_Yes=function(){cc.log("onClick_reset_Yes "),this.gamecfg.ReducePiontQty(50);for(var t=0;t<this.skills.length;t++)this.gamecfg.setMilitarySkill(t,!1);this.flash()},e.prototype.onClick_GotoCharge=function(){this.trans.reqForward("MM_08_01_01")},__decorate([l(cc.Label)],e.prototype,"labTotalStars",void 0),__decorate([l(cc.Label)],e.prototype,"labRemainStar",void 0),__decorate([l(cc.Node)],e.prototype,"btnReset",void 0),__decorate([l([i.default])],e.prototype,"skills",void 0),__decorate([c],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Model/GameConfig":"GameConfig","../Model/MessageDialog":"MessageDialog","../Model/MilitarySkill":"MilitarySkill","./MM_Transition":"MM_Transition"}],MM_03_03_01:[function(t,e,o){"use strict";cc._RF.push(e,"8327ffMZuZOH5hz+RxTy39E","MM_03_03_01"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Model/GameConfig"),i=t("./MM_Transition"),r=t("../Model/MessageDialog"),s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btnConfirm=null,e.btnLeave=null,e.NodeRoundNumTip=null,e.AniFocus=null,e.WarSelection=null,e.lblRoundOrder=null,e.warRounds=[],e.warTitles=[],e.lblTotalStars=null,e.WarSelectionNormal=null,e.WarSelectionHard=null,e.WarSelectionVeryHard=null,e.WarSelectionArrow=null,e.txtDisableHard=null,e.txtDisableVeryHard=null,e.gameConfig=null,e.roundOrder=0,e.lastFocusRoundOrder=0,e.lastFocusHard=0,e.totalStars=0,e.trans=null,e.bundleData={SceenID:"MM_03_03_01",BattleID:-1},e.clearLv1=!1,e.clearLv2=!1,e.clearLv3=!1,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.trans=new i.default,this.gameConfig=new n.default,this.gameConfig.Load(),this.btnConfirm.node.on("click",this.onClick_Confirm,this),this.btnLeave.node.on("click",this.onClick_Leave,this),this.WarSelection.on("click",this.onClick_WarSelection,this),this.WarSelectionNormal.on("click",this.onClick_Confirm,this),this.WarSelectionHard.on("click",this.onClick_Confirm,this),this.WarSelectionVeryHard.on("click",this.onClick_Confirm,this),this.WarSelectionNormal.on("mouseenter",function(){t.onMouseEnter_WarSelection(t.WarSelectionNormal)},this),this.WarSelectionHard.on("mouseenter",function(){t.onMouseEnter_WarSelection(t.WarSelectionHard)},this),this.WarSelectionVeryHard.on("mouseenter",function(){t.onMouseEnter_WarSelection(t.WarSelectionVeryHard)},this),this.NodeRoundNumTip.active=!1,this.WarSelection.active=!1,this.LoadMapInfo(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onDestroy=function(){cc.systemEvent.targetOff(this)},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.WarSelection.active?this.WarSelection.active=!1:this.trans.reqBack()}},e.prototype.LoadMapInfo=function(){var t=this;this.CalTotalStars();for(var e=function(e){var n=o.warRounds[e],i=n.getComponentInChildren(cc.Toggle);if(0==e)i.isChecked=!0;else{var r=3*e-1,s=o.gameConfig.warRound[r];i.isChecked=1==s}n.on("mouseenter",function(){t.onMouseEnter_Round(n,e)}),n.on("mouseenter",function(){t.onMouseEnter_Round(n,e)}),n.on("mouseleave",function(){t.onMouseLeave_Round(n,e)}),n.on("click",function(o){t.onClick_Round(o,e)},o)},o=this,n=0;n<this.warRounds.length;n++)e(n);this.lblTotalStars.string=this.totalStars.toString();var i=this.warRounds[0];this.onSetSelect_Round(i,0)},e.prototype.onClick_Confirm=function(t){if(cc.log("onClick_Confirm"),this.WarSelection.active){if(this.bundleData.BattleID=3*this.lastFocusRoundOrder+this.lastFocusHard,t.node==this.WarSelectionHard&&!this.clearLv1)return;if(t.node==this.WarSelectionVeryHard&&!this.clearLv2)return;this.trans.setBundle(this.bundleData),this.trans.reqForward("MM_03_03_02")}else{var e=this.warRounds[this.lastFocusRoundOrder].getComponent(cc.Button);this.onClick_Round(e,this.lastFocusRoundOrder)}},e.prototype.onClick_Leave=function(){cc.log("onClick_Leave"),this.trans.reqBack()},e.prototype.onMouseEnter_WarSelection=function(t){if(cc.log("onMouseEnter_WarSelection"),this.WarSelectionNormal==t)this.lastFocusHard=0;else if(this.WarSelectionHard==t){if(!this.clearLv1)return;this.lastFocusHard=1}else{if(!this.clearLv2)return;this.lastFocusHard=2}this.WarSelectionArrow.y=t.y},e.prototype.onClick_WarSelection=function(){cc.log("onClick_WarSelection"),this.WarSelection.active=!1},e.prototype.onSetSelect_Round=function(t,e){this.warTitles[this.lastFocusRoundOrder].active=!1,this.setNodeRoundOrder(e),this.warTitles[e].active=!0,this.lastFocusRoundOrder=e,this.AniFocus.x=t.x,this.AniFocus.y=t.y-.7*t.getContentSize().height},e.prototype.onMouseEnter_Round=function(t,e){t.getComponentInChildren(cc.Toggle).isChecked&&(this.warTitles[e].active=!0)},e.prototype.onMouseLeave_Round=function(t,e){t.getComponentInChildren(cc.Toggle).isChecked&&this.lastFocusRoundOrder!=e&&(this.warTitles[e].active=!1)},e.prototype.onClick_Round=function(t,e){if(cc.log("onClick_Round_"+t.name),t.getComponentInChildren(cc.Toggle).isChecked)if(t.node!=this.warRounds[16]){this.onSetSelect_Round(t.node,e),this.WarSelection.active=!0;var o=3*e;this.clearLv1=1==this.gameConfig.warRound[o],this.clearLv2=1==this.gameConfig.warRound[o+1],this.clearLv3=1==this.gameConfig.warRound[o+2],this.txtDisableHard.active=!this.clearLv1,this.txtDisableVeryHard.active=!this.clearLv2}else r.default.showMsg_1btn(this.node,"\u901a\u5929\u5854\u5c1a\u672a\u5be6\u88dd",null)},e.prototype.setNodeRoundOrder=function(t){this.roundOrder=t+1,this.lblRoundOrder.string=this.roundOrder.toString(),this.NodeRoundNumTip.active=!0},e.prototype.CalTotalStars=function(){},__decorate([c(cc.Button)],e.prototype,"btnConfirm",void 0),__decorate([c(cc.Button)],e.prototype,"btnLeave",void 0),__decorate([c(cc.Node)],e.prototype,"NodeRoundNumTip",void 0),__decorate([c(cc.Node)],e.prototype,"AniFocus",void 0),__decorate([c(cc.Node)],e.prototype,"WarSelection",void 0),__decorate([c(cc.Label)],e.prototype,"lblRoundOrder",void 0),__decorate([c([cc.Node])],e.prototype,"warRounds",void 0),__decorate([c([cc.Node])],e.prototype,"warTitles",void 0),__decorate([c(cc.Label)],e.prototype,"lblTotalStars",void 0),__decorate([c(cc.Node)],e.prototype,"WarSelectionNormal",void 0),__decorate([c(cc.Node)],e.prototype,"WarSelectionHard",void 0),__decorate([c(cc.Node)],e.prototype,"WarSelectionVeryHard",void 0),__decorate([c(cc.Node)],e.prototype,"WarSelectionArrow",void 0),__decorate([c(cc.Node)],e.prototype,"txtDisableHard",void 0),__decorate([c(cc.Node)],e.prototype,"txtDisableVeryHard",void 0),__decorate([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Model/GameConfig":"GameConfig","../Model/MessageDialog":"MessageDialog","./MM_Transition":"MM_Transition"}],MM_03_03_02:[function(t,e,o){"use strict";cc._RF.push(e,"cefdag5ChdL3JriNpvsRSwV","MM_03_03_02"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./MM_Transition"),i=t("../Model/GeneralBG"),r=t("../Model/LevelConfig"),s=t("../Model/HeroInfoBase"),a=cc._decorator,c=a.ccclass,l=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labBattleName=null,e.labBattleHardLv=null,e.labCondition=null,e.labEnemyName=null,e.labSoldierType=null,e.ImgEnemyHero=null,e.ImgRecommend=null,e.nodeEnemyInfantry=null,e.nodeEnemyArcher=null,e.nodeEnemyWizard=null,e.nodeEnemyCavalryman=null,e.nodeEnemySpearman=null,e.nodeSupportInfantry=null,e.nodeSupportArcher=null,e.nodeSupportWizard=null,e.nodeSupportCavalryman=null,e.nodeSupportSpearman=null,e.GeneralBG=null,e.trans=null,e.bundleData=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.GeneralBG.setOnClick_BtnConfirm(function(){t.onClick_BtnConfirm()}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.trans=new n.default,this.bundleData=this.trans.getBundle(),null==this.bundleData&&(this.bundleData={SceenID:"MM_03_03_02",BattleID:0}),cc.log("MM_03_03_02 onLoad "+JSON.stringify(this.trans.bundleData)),this.labBattleName.string="null",this.labBattleHardLv.string="null",this.labEnemyName.string="null",this.labSoldierType.string="null",this.ImgEnemyHero.active=!1,this.ImgRecommend.active=!0,this.nodeEnemyInfantry.active=!1,this.nodeEnemyArcher.active=!1,this.nodeEnemyWizard.active=!1,this.nodeEnemyCavalryman.active=!1,this.nodeEnemySpearman.active=!1,this.nodeSupportInfantry.active=!1,this.nodeSupportArcher.active=!1,this.nodeSupportWizard.active=!1,this.nodeSupportCavalryman.active=!1,this.nodeSupportSpearman.active=!1;var e=r.default.getBattle(this.bundleData.BattleID);if(e){switch(this.labBattleName.string=e.Name,e.Hard){case 0:this.labBattleHardLv.string="\u666e\u901a";break;case 1:this.labBattleHardLv.string="\u56f0\u96e3";break;case 2:this.labBattleHardLv.string="\u60e1\u5922"}var o="\u6bba\u6b7b\u6575\u65b9"+e.KillSoldiers+"\u500b\u5c0f\u5175",i=s.default.newHeroInfoBase(e.EnemyHeroID,a,c,l);if(-1!=e.EnemyHeroID){o="\u6bba\u6b7b\u6575\u65b9\u5c07\u9818";var a=0,c=0,l=0;this.labEnemyName.string=i.Name,this.ImgEnemyHero.active=!0}switch(-1!=e.EnemyHomeHP&&(o+="\u4e26\u6467\u6bc0\u6575\u65b9\u8ecd\u71df"),i.Class){case 1:this.nodeEnemyInfantry.active=!0;break;case 2:this.nodeEnemySpearman.active=!0;break;case 3:this.nodeEnemyCavalryman.active=!0;break;case 4:this.nodeEnemyArcher.active=!0;break;case 5:this.nodeEnemyWizard.active=!0}switch(this.labCondition.string=o,e.SoldierType){case"Avg":this.labSoldierType.string="\u5e73\u5747",this.ImgRecommend.active=!1;break;case"Infantry":this.labSoldierType.string="\u6b65\u5175",this.nodeSupportArcher.active=!0;break;case"Spearman":this.labSoldierType.string="\u69cd\u5175",this.nodeSupportInfantry.active=!0;break;case"Cavalryman":this.labSoldierType.string="\u9a0e\u5175",this.nodeSupportSpearman.active=!0;break;case"Archer":this.labSoldierType.string="\u5f13\u5175",this.nodeSupportCavalryman.active=!0}}},e.prototype.onDestroy=function(){cc.systemEvent.targetOff(this)},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.trans.reqBack()}},e.prototype.onClick_BtnConfirm=function(){cc.log("onClick_BtnConfirm"),this.trans.reqForward("MM_03_03_03")},__decorate([l(cc.Label)],e.prototype,"labBattleName",void 0),__decorate([l(cc.Label)],e.prototype,"labBattleHardLv",void 0),__decorate([l(cc.Label)],e.prototype,"labCondition",void 0),__decorate([l(cc.Label)],e.prototype,"labEnemyName",void 0),__decorate([l(cc.Label)],e.prototype,"labSoldierType",void 0),__decorate([l(cc.Node)],e.prototype,"ImgEnemyHero",void 0),__decorate([l(cc.Node)],e.prototype,"ImgRecommend",void 0),__decorate([l(cc.Node)],e.prototype,"nodeEnemyInfantry",void 0),__decorate([l(cc.Node)],e.prototype,"nodeEnemyArcher",void 0),__decorate([l(cc.Node)],e.prototype,"nodeEnemyWizard",void 0),__decorate([l(cc.Node)],e.prototype,"nodeEnemyCavalryman",void 0),__decorate([l(cc.Node)],e.prototype,"nodeEnemySpearman",void 0),__decorate([l(cc.Node)],e.prototype,"nodeSupportInfantry",void 0),__decorate([l(cc.Node)],e.prototype,"nodeSupportArcher",void 0),__decorate([l(cc.Node)],e.prototype,"nodeSupportWizard",void 0),__decorate([l(cc.Node)],e.prototype,"nodeSupportCavalryman",void 0),__decorate([l(cc.Node)],e.prototype,"nodeSupportSpearman",void 0),__decorate([l(i.default)],e.prototype,"GeneralBG",void 0),__decorate([c],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Model/GeneralBG":"GeneralBG","../Model/HeroInfoBase":"HeroInfoBase","../Model/LevelConfig":"LevelConfig","./MM_Transition":"MM_Transition"}],MM_03_03_03:[function(t,e,o){"use strict";cc._RF.push(e,"f3fa3JbDzRHBZ+sSNeBpHiB","MM_03_03_03"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./MM_Transition"),i=t("../Model/GeneralBG"),r=t("../Model/GameConfig"),s=t("../Model/HeroInfoBase"),a=cc._decorator,c=a.ccclass,l=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.GeneralBG=null,e.NodeHeroSelect=null,e.NodeHeroInfo=null,e.trans=null,e.bundleData=null,e.gameConfig=null,e.conHeroSelect=null,e.conHeroInfo=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;if(this.trans=new n.default,this.bundleData=this.trans.getBundle(),null==this.bundleData&&(this.bundleData={SceenID:"MM_03_03_03",BattleID:0}),cc.log("MM_03_03_03 onLoad "+JSON.stringify(this.trans.bundleData)),this.GeneralBG.setOnClick_BtnConfirm(function(){t.onClick_BtnConfirm()}),this.conHeroSelect=this.NodeHeroSelect.getComponent("HeroSelect"),this.conHeroInfo=this.NodeHeroInfo.getComponent("HeroInfo"),this.gameConfig=new r.default,this.gameConfig.Load(),this.conHeroSelect.setOnClick_NodePortraitPlus(function(e,o){t.onClick_NodePortrait(e,o)}),null!=this.gameConfig.heros){for(var e=this.gameConfig.heros.length,o=0;o<e;o++){var i=this.gameConfig.heros[o],a=s.default.newHeroInfoBase(i);this.conHeroSelect.Heros.push(a)}e>0?this.onClick_NodePortrait(null,0):(a=new s.default(27,3,3,33),this.conHeroSelect.Heros.push(a),this.onClick_NodePortrait(null,0))}cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onDestroy=function(){cc.systemEvent.targetOff(this)},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.trans.reqBack()}},e.prototype.onClick_BtnConfirm=function(){cc.log("onClick_BtnConfirm"),this.trans.setBundle(this.bundleData),this.trans.reqForward("MM_05_01_01")},e.prototype.onClick_NodePortrait=function(t,e){cc.log("onClick_NodePortrait index="+e);var o=this.conHeroSelect.Heros[e];this.bundleData.HeroID=o.ID,this.conHeroInfo.setHeroInfo(o),this.conHeroInfo.updateData()},__decorate([l(i.default)],e.prototype,"GeneralBG",void 0),__decorate([l(cc.Node)],e.prototype,"NodeHeroSelect",void 0),__decorate([l(cc.Node)],e.prototype,"NodeHeroInfo",void 0),__decorate([c],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Model/GameConfig":"GameConfig","../Model/GeneralBG":"GeneralBG","../Model/HeroInfoBase":"HeroInfoBase","./MM_Transition":"MM_Transition"}],MM_03_04_01:[function(t,e,o){"use strict";cc._RF.push(e,"66badSE04lMA4mniMAA8L6o","MM_03_04_01"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Model/HeroInfoBase"),i=t("./MM_Transition"),r=t("../Model/GameConfig"),s=t("../Model/GeneralBG"),a=cc._decorator,c=a.ccclass,l=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeGeneralBG=null,e.NodeHeroSelect=null,e.NodeHeroInfo=null,e.btnPowerful=null,e.btnLvUp=null,e.btnFusion=null,e.btnJewelUpgrade=null,e.btnCancel=null,e.gameConfig=null,e.conHeroSelect=null,e.conHeroInfo=null,e.trans=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;if(cc.log("tag","message","333"),cc.log("onLoad"),this.trans=new i.default,this.NodeGeneralBG.getComponent(s.default).isShowSelection=!1,this.btnPowerful.node.on("click",this.onClick_btnPowerful,this),this.btnLvUp.node.on("click",this.onClick_btnLvUp,this),this.btnFusion.node.on("click",this.onClick_btnFusion,this),this.btnJewelUpgrade.node.on("click",this.onClick_btnJewelUpgrade,this),this.btnCancel.node.on("click",this.onClick_btnCancel,this),this.conHeroSelect=this.NodeHeroSelect.getComponent("HeroSelect"),this.conHeroInfo=this.NodeHeroInfo.getComponent("HeroInfo"),this.gameConfig=new r.default,this.gameConfig.Load(),this.conHeroSelect.setOnClick_NodePortraitPlus(function(e,o){t.onClick_NodePortrait(e,o)}),null!=this.gameConfig.heros){for(var e=this.gameConfig.heros.length,o=0;o<e;o++){var a=this.gameConfig.heros[o],c=n.default.newHeroInfoBase(a);this.conHeroSelect.Heros.push(c)}e>0&&this.onClick_NodePortrait(null,0)}cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onDestroy=function(){cc.systemEvent.targetOff(this)},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.trans.reqBack()}},e.prototype.start=function(){cc.log("start")},e.prototype.onClick_btnPowerful=function(){cc.log("onClick_btnPowerful"),this.trans.reqForward("MM_03_04_02")},e.prototype.onClick_btnLvUp=function(){cc.log("onClick_btnLvUp")},e.prototype.onClick_btnFusion=function(){cc.log("onClick_btnFusion"),this.trans.reqForward("MM_03_04_03")},e.prototype.onClick_btnJewelUpgrade=function(){cc.log("onClick_btnJewelUpgrade")},e.prototype.onClick_btnCancel=function(){cc.log("onClick_btnCancel"),this.trans.reqBack()},e.prototype.onClick_NodePortrait=function(t,e){cc.log("onClick_NodePortrait index="+e);var o=this.conHeroSelect.Heros[e];this.conHeroInfo.setHeroInfo(o),this.conHeroInfo.updateData()},__decorate([l(cc.Node)],e.prototype,"NodeGeneralBG",void 0),__decorate([l(cc.Node)],e.prototype,"NodeHeroSelect",void 0),__decorate([l(cc.Node)],e.prototype,"NodeHeroInfo",void 0),__decorate([l(cc.Button)],e.prototype,"btnPowerful",void 0),__decorate([l(cc.Button)],e.prototype,"btnLvUp",void 0),__decorate([l(cc.Button)],e.prototype,"btnFusion",void 0),__decorate([l(cc.Button)],e.prototype,"btnJewelUpgrade",void 0),__decorate([l(cc.Button)],e.prototype,"btnCancel",void 0),__decorate([c],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Model/GameConfig":"GameConfig","../Model/GeneralBG":"GeneralBG","../Model/HeroInfoBase":"HeroInfoBase","./MM_Transition":"MM_Transition"}],MM_03_05_01:[function(t,e,o){"use strict";cc._RF.push(e,"a178e0f22ZBDqy6JE5lCi1p","MM_03_05_01"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Model/GeneralBG"),i=t("../Model/MessageDialog"),r=t("../Model/GameConfig"),s=t("./MM_Transition"),a=t("../Model/BarracksSelection"),c=t("../Model/BarracksInfo"),l=cc._decorator,d=l.ccclass,h=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeGeneralBG=null,e.labDiamondCount=null,e.Infantry=null,e.Spearman=null,e.Cavalryman=null,e.Archer=null,e.BIInfantry=null,e.BISpearman=null,e.BICavalryman=null,e.BIArcher=null,e.gameConfig=null,e.trans=null,e.GeneralBG=null,e.ItemID_Diamond=1,e.BS_Infantry=null,e.BS_Spearman=null,e.BS_Cavalryman=null,e.BS_Archer=null,e.BI_Infantry=null,e.BI_Spearman=null,e.BI_Cavalryman=null,e.BI_Archer=null,e.addAniInfantry=0,e.addAniSpearman=0,e.addAniCavalryman=0,e.addAniArcher=0,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.trans=new s.default,this.gameConfig=new r.default,this.gameConfig.Load(),this.GeneralBG=this.NodeGeneralBG.getComponent(n.default),this.GeneralBG.isShowConfirm=!1,this.labDiamondCount.string=""+this.gameConfig.Items[this.ItemID_Diamond],this.BI_Infantry=this.BIInfantry.getComponent(c.default),this.BI_Infantry.soldierID=0,this.BI_Spearman=this.BISpearman.getComponent(c.default),this.BI_Spearman.soldierID=1,this.BI_Cavalryman=this.BICavalryman.getComponent(c.default),this.BI_Cavalryman.soldierID=2,this.BI_Archer=this.BIArcher.getComponent(c.default),this.BI_Archer.soldierID=3,this.BS_Infantry=this.Infantry.getComponent(a.default),this.BS_Spearman=this.Spearman.getComponent(a.default),this.BS_Cavalryman=this.Cavalryman.getComponent(a.default),this.BS_Archer=this.Archer.getComponent(a.default),this.BS_Infantry.setOnClick_LeftUnselected(function(){t.onClick_BS_Infantry_Left()}),this.BS_Infantry.setOnClick_RightUnselected(function(){t.onClick_BS_Infantry_Right()}),this.BS_Spearman.setOnClick_LeftUnselected(function(){t.onClick_BS_Spearman_Left()}),this.BS_Spearman.setOnClick_RightUnselected(function(){t.onClick_BS_Spearman_Right()}),this.BS_Cavalryman.setOnClick_LeftUnselected(function(){t.onClick_BS_Cavalryman_Left()}),this.BS_Cavalryman.setOnClick_RightUnselected(function(){t.onClick_BS_Cavalryman_Right()}),this.BS_Archer.setOnClick_LeftUnselected(function(){t.onClick_BS_Archer_Left()}),this.BS_Archer.setOnClick_RightUnselected(function(){t.onClick_BS_Archer_Right()}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onDestroy=function(){cc.systemEvent.targetOff(this)},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.trans.reqBack()}},e.prototype.update=function(){var t=!1;this.addAniInfantry>0&&(this.gameConfig.addSoldierExp(0,10),this.addAniInfantry-=10,t=!0),this.addAniSpearman>0&&(this.gameConfig.addSoldierExp(1,10),this.addAniSpearman-=10,t=!0),this.addAniCavalryman>0&&(this.gameConfig.addSoldierExp(2,10),this.addAniCavalryman-=10,t=!0),this.addAniArcher>0&&(this.gameConfig.addSoldierExp(3,10),this.addAniArcher-=10,t=!0),t&&this.flashSoldierInfo()},e.prototype.onClick_BS_Infantry_Left=function(){this.BS_Spearman.setFocus(!1),this.BS_Cavalryman.setFocus(!1),this.BS_Archer.setFocus(!1),this.flashSoldierInfo()},e.prototype.onClick_BS_Infantry_Right=function(){var t=this;this.onClick_BS_Infantry_Left(),this.gameConfig.Items[this.ItemID_Diamond]>0?i.default.showMsg_2btn(this.node,"\u78ba\u5b9a\u6d88\u80171\u500b\u947d\u77f3\u5347\u7d1a\uff1f",function(){t.onClick_doInfantryLvUp()},null,null,null):i.default.showMsg_2btn(this.node,"\u947d\u77f3\u4e0d\u8db3\u662f\u5426\u524d\u5f80\u5546\u57ce\u8cfc\u8cb7\uff1f",function(){t.onClick_GotoCharge()},null,null,null)},e.prototype.onClick_doInfantryLvUp=function(){this.gameConfig.ReduceItemQty(this.ItemID_Diamond,1),this.addAniInfantry+=1e3},e.prototype.onClick_BS_Spearman_Left=function(){this.BS_Infantry.setFocus(!1),this.BS_Cavalryman.setFocus(!1),this.BS_Archer.setFocus(!1),this.flashSoldierInfo()},e.prototype.onClick_BS_Spearman_Right=function(){var t=this;this.onClick_BS_Spearman_Left(),this.gameConfig.Items[this.ItemID_Diamond]>0?i.default.showMsg_2btn(this.node,"\u78ba\u5b9a\u6d88\u80171\u500b\u947d\u77f3\u5347\u7d1a\uff1f",function(){t.onClick_doSpearmanLvUp()},null,null,null):i.default.showMsg_2btn(this.node,"\u947d\u77f3\u4e0d\u8db3\u662f\u5426\u524d\u5f80\u5546\u57ce\u8cfc\u8cb7\uff1f",function(){t.onClick_GotoCharge()},null,null,null)},e.prototype.onClick_doSpearmanLvUp=function(){this.gameConfig.ReduceItemQty(this.ItemID_Diamond,1),this.addAniSpearman+=1e3},e.prototype.onClick_BS_Cavalryman_Left=function(){this.BS_Infantry.setFocus(!1),this.BS_Spearman.setFocus(!1),this.BS_Archer.setFocus(!1),this.flashSoldierInfo()},e.prototype.onClick_BS_Cavalryman_Right=function(){var t=this;this.onClick_BS_Cavalryman_Left(),this.gameConfig.Items[this.ItemID_Diamond]>0?i.default.showMsg_2btn(this.node,"\u78ba\u5b9a\u6d88\u80171\u500b\u947d\u77f3\u5347\u7d1a\uff1f",function(){t.onClick_doCavalrymanLvUp()},null,null,null):i.default.showMsg_2btn(this.node,"\u947d\u77f3\u4e0d\u8db3\u662f\u5426\u524d\u5f80\u5546\u57ce\u8cfc\u8cb7\uff1f",function(){t.onClick_GotoCharge()},null,null,null)},e.prototype.onClick_doCavalrymanLvUp=function(){this.gameConfig.ReduceItemQty(this.ItemID_Diamond,1),this.addAniCavalryman+=1e3},e.prototype.onClick_BS_Archer_Left=function(){this.BS_Infantry.setFocus(!1),this.BS_Spearman.setFocus(!1),this.BS_Cavalryman.setFocus(!1),this.flashSoldierInfo()},e.prototype.onClick_BS_Archer_Right=function(){var t=this;this.onClick_BS_Archer_Left(),this.gameConfig.Items[this.ItemID_Diamond]>0?i.default.showMsg_2btn(this.node,"\u78ba\u5b9a\u6d88\u80171\u500b\u947d\u77f3\u5347\u7d1a\uff1f",function(){t.onClick_doArcherLvUp()},null,null,null):i.default.showMsg_2btn(this.node,"\u947d\u77f3\u4e0d\u8db3\u662f\u5426\u524d\u5f80\u5546\u57ce\u8cfc\u8cb7\uff1f",function(){t.onClick_GotoCharge()},null,null,null)},e.prototype.onClick_doArcherLvUp=function(){this.gameConfig.ReduceItemQty(this.ItemID_Diamond,1),this.addAniArcher+=1e3},e.prototype.onClick_GotoCharge=function(){this.trans.reqForward("MM_08_04_01")},e.prototype.flashSoldierInfo=function(){this.labDiamondCount.string=""+this.gameConfig.Items[this.ItemID_Diamond],this.BI_Infantry.flash(),this.BI_Spearman.flash(),this.BI_Cavalryman.flash(),this.BI_Archer.flash()},__decorate([h(cc.Node)],e.prototype,"NodeGeneralBG",void 0),__decorate([h(cc.Label)],e.prototype,"labDiamondCount",void 0),__decorate([h(cc.Node)],e.prototype,"Infantry",void 0),__decorate([h(cc.Node)],e.prototype,"Spearman",void 0),__decorate([h(cc.Node)],e.prototype,"Cavalryman",void 0),__decorate([h(cc.Node)],e.prototype,"Archer",void 0),__decorate([h(cc.Node)],e.prototype,"BIInfantry",void 0),__decorate([h(cc.Node)],e.prototype,"BISpearman",void 0),__decorate([h(cc.Node)],e.prototype,"BICavalryman",void 0),__decorate([h(cc.Node)],e.prototype,"BIArcher",void 0),__decorate([d],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Model/BarracksInfo":"BarracksInfo","../Model/BarracksSelection":"BarracksSelection","../Model/GameConfig":"GameConfig","../Model/GeneralBG":"GeneralBG","../Model/MessageDialog":"MessageDialog","./MM_Transition":"MM_Transition"}],MM_03_06_01:[function(t,e,o){"use strict";cc._RF.push(e,"602d0PR+HxNXYxqWkJ1EQnP","MM_03_06_01"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Screen/MM_Transition"),i=t("../Model/GameConfig"),r=t("../Model/HeroInfoBase"),s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BtnAddSorghum=null,e.BtnAddDukang=null,e.btnRecruitLeft=null,e.btnRecruitRight=null,e.btnSorghum=null,e.btnDukang=null,e.btnLeave=null,e.NodeLeftHero=null,e.NodeRightHero=null,e.conLeftHeroInfo=null,e.conRightHeroInfo=null,e.lblSorghum=null,e.lblDukang=null,e.gameConfig=null,e.tavernLeftHero=null,e.tavernRightHero=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.gameConfig=new i.default,this.gameConfig.onLoad(),this.BtnAddSorghum.node.on("click",this.onClick_BtnAddSorghum,this),this.BtnAddDukang.node.on("click",this.onClick_BtnAddDukang,this),this.btnRecruitLeft.node.on("click",this.onClick_btnRecruitLeft,this),this.btnRecruitRight.node.on("click",this.onClick_btnRecruitRight,this),this.btnSorghum.node.on("click",this.onClick_btnSorghum,this),this.btnDukang.node.on("click",this.onClick_btnDukang,this),this.btnLeave.node.on("click",this.onClick_btnLeave,this),this.lblSorghum.string="0",this.lblDukang.string="0",null!=this.gameConfig.Items[2]&&this.gameConfig.Items[2]>=0&&(this.lblSorghum.string=this.gameConfig.Items[2].toString()),null!=this.gameConfig.Items[3]&&this.gameConfig.Items[3]>=0&&(this.lblDukang.string=this.gameConfig.Items[3].toString()),this.conLeftHeroInfo=this.NodeLeftHero.getComponent("HeroInfo"),this.conRightHeroInfo=this.NodeRightHero.getComponent("HeroInfo"),this.NodeLeftHero.active=!1,this.btnRecruitLeft.node.active=!1,this.NodeRightHero.active=!1,this.btnRecruitRight.node.active=!1,this.gameConfig.tavernLeftHero&&(this.tavernLeftHero=r.default.newHeroInfoBase(this.gameConfig.tavernLeftHero),this.conLeftHeroInfo.setHeroInfo(this.tavernLeftHero),this.conLeftHeroInfo.updateData(),this.NodeLeftHero.active=!0,this.btnRecruitLeft.node.active=!0),this.gameConfig.tavernRightHero&&(this.tavernRightHero=r.default.newHeroInfoBase(this.gameConfig.tavernRightHero),this.conRightHeroInfo.setHeroInfo(this.tavernRightHero),this.conRightHeroInfo.updateData(),this.NodeRightHero.active=!0,this.btnRecruitRight.node.active=!0),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onDestroy=function(){cc.systemEvent.targetOff(this)},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.onClick_btnLeave(null)}},e.prototype.onClick_BtnAddSorghum=function(){this.gameConfig.AddItemQty(2,5),this.lblSorghum.string=""+this.gameConfig.Items[2]},e.prototype.onClick_BtnAddDukang=function(){this.gameConfig.AddItemQty(3,5),this.lblDukang.string=""+this.gameConfig.Items[3]},e.prototype.onClick_btnRecruitLeft=function(){cc.log("onClick_btnRecruitLeft"),this.Recruit(this.tavernLeftHero),this.tavernLeftHero=null,this.NodeLeftHero.active=!1,this.btnRecruitLeft.node.active=!1,this.gameConfig.SetTavernHero(this.tavernLeftHero,this.tavernRightHero)},e.prototype.onClick_btnRecruitRight=function(){cc.log("onClick_btnRecruitRight"),this.Recruit(this.tavernRightHero),this.tavernRightHero=null,this.NodeRightHero.active=!1,this.btnRecruitRight.node.active=!1,this.gameConfig.SetTavernHero(this.tavernLeftHero,this.tavernRightHero)},e.prototype.onClick_btnSorghum=function(){if(cc.log("onClick_btnSorghum"),this.gameConfig.Items[2]>0){this.gameConfig.ReduceItemQty(2,1),this.lblSorghum.string=""+this.gameConfig.Items[2],this.tavernLeftHero=this.ProduceRandomHero(3);do{this.tavernRightHero=this.ProduceRandomHero(3)}while(this.tavernRightHero.ID==this.tavernLeftHero.ID);this.UpdateBothHeroWin()}this.gameConfig.SetTavernHero(this.tavernLeftHero,this.tavernRightHero)},e.prototype.onClick_btnDukang=function(){if(cc.log("onClick_btnDukang"),this.gameConfig.Items[3]>0){this.gameConfig.ReduceItemQty(3,1),this.lblDukang.string=""+this.gameConfig.Items[3],this.tavernLeftHero=this.ProduceRandomHero(5);do{this.tavernRightHero=this.ProduceRandomHero(5)}while(this.tavernRightHero.ID==this.tavernLeftHero.ID);this.UpdateBothHeroWin()}this.gameConfig.SetTavernHero(this.tavernLeftHero,this.tavernRightHero)},e.prototype.onClick_btnLeave=function(){cc.log("onClick_btnLeave"),(new n.default).reqBack()},e.prototype.ProduceRandomHero=function(t){var e,o=Math.floor(28*Math.random());return t>5&&(t=5),e=t>3?Math.floor(3*Math.random())+2:Math.floor(Math.random()*t),new r.default(o,e,1,0)},e.prototype.UpdateBothHeroWin=function(){this.conLeftHeroInfo.setHeroInfo(this.tavernLeftHero),this.conLeftHeroInfo.updateData(),this.NodeLeftHero.active=!0,this.btnRecruitLeft.node.active=!0,this.conRightHeroInfo.setHeroInfo(this.tavernRightHero),this.conRightHeroInfo.updateData(),this.NodeRightHero.active=!0,this.btnRecruitRight.node.active=!0},e.prototype.Recruit=function(t){this.gameConfig.Load(),this.gameConfig.AddHero(t,!1)?cc.log("Recruit Success!!"):(cc.log("Already has same hero."),this.gameConfig.AddHero(t,!0)),this.gameConfig.SaveHeros()},__decorate([c(cc.Button)],e.prototype,"BtnAddSorghum",void 0),__decorate([c(cc.Button)],e.prototype,"BtnAddDukang",void 0),__decorate([c(cc.Button)],e.prototype,"btnRecruitLeft",void 0),__decorate([c(cc.Button)],e.prototype,"btnRecruitRight",void 0),__decorate([c(cc.Button)],e.prototype,"btnSorghum",void 0),__decorate([c(cc.Button)],e.prototype,"btnDukang",void 0),__decorate([c(cc.Button)],e.prototype,"btnLeave",void 0),__decorate([c(cc.Node)],e.prototype,"NodeLeftHero",void 0),__decorate([c(cc.Node)],e.prototype,"NodeRightHero",void 0),__decorate([c(cc.Label)],e.prototype,"lblSorghum",void 0),__decorate([c(cc.Label)],e.prototype,"lblDukang",void 0),__decorate([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Model/GameConfig":"GameConfig","../Model/HeroInfoBase":"HeroInfoBase","../Screen/MM_Transition":"MM_Transition"}],MM_05_01_01:[function(t,e,o){"use strict";cc._RF.push(e,"6daceRwCi5CV7xXcpLUyBZ4","MM_05_01_01"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Model/GameConfig"),i=t("./MM_Transition"),r=t("../Model/LevelConfig"),s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.updateSpeedUI=60,e.txtNowX=null,e.labHP=null,e.progressHeroHP=null,e.TxtSupporter=null,e.TxtEnemyRole=null,e.TxtBattleID=null,e.txtAim=null,e.togHeroCollider=null,e.togGenSupporter=null,e.togGenEnemyRole=null,e.btnAddGen=null,e.btnAddEnemy=null,e.labDiamondNum=null,e.spriteHeroImg=null,e.Background=null,e.Ground=null,e.Hero=null,e.EnemyHero=null,e.Supporter=null,e.EnemyRole=null,e.Home=null,e.EnemyHome=null,e.TowerHome=null,e.TowerEnemy=null,e.btnInfantry=null,e.btnSpearman=null,e.btnCavalryman=null,e.btnArcher=null,e.btnAttack=null,e.btnHeart=null,e.btnDrum=null,e.lableForage=null,e.lableMaxForage=null,e.HeroIcon=[],e.xBgRoll=.5,e.width=0,e.sideRight=0,e.sideLeft=0,e.moveGround=0,e.moveBackground=0,e.pressedRight=!1,e.pressedLeft=!1,e._updateSpeedUI=0,e.scenario=null,e.Role=null,e.nowX=0,e.maxForage=150,e.forage=0,e.updateForageTime=1,e.heroHp=300,e.skillCDTime=2,e.isBtnInfantryCD=!1,e.isBtnSpearmanCD=!1,e.isBtnCavalrymanCD=!1,e.isBtnArcherCD=!1,e.gameCfg=null,e.trans=null,e.bundleData=null,e.ItemID_Diamond=1,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;if(console.log("onLoad"),this.trans=new i.default,this.trans.bundleData.data){cc.log("MM_05_01_01 onLoad "+JSON.stringify(this.trans.bundleData)),this.bundleData=this.trans.bundleData.data,this.gameCfg=new n.default,this.gameCfg.Load();var e=this.bundleData.BattleID||0,o=r.default.getBattle(e);this.togHeroCollider.node.on("toggle",this.onToggle_togHeroCollider,this),this.togGenSupporter.node.on("toggle",this.onToggle_togGenSupporter,this),this.togGenEnemyRole.node.on("toggle",this.onToggle_togGenEnemyRole,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),this.width=this.node.getContentSize().width/2,this.sideRight=0-this.node.getContentSize().width-this.width,this.sideLeft=0-this.width,this.txtNowX.string=this.nowX+"",this.TxtBattleID.string=e,this.scenario=this.getComponent("Scenario"),this.scenario.setConfig(this.gameCfg,o,e),this.scenario.Hero=this.Hero,this.scenario.EnemyHero=this.EnemyHero,this.scenario.Supporter=this.Supporter,this.scenario.EnemyRole=this.EnemyRole,this.scenario.Home=this.Home,this.scenario.EnemyHome=this.EnemyHome,this.scenario.TowerHome=this.TowerHome,this.scenario.TowerEnemy=this.TowerEnemy,this.togGenSupporter.isChecked=this.scenario.isGenSupport,this.togGenEnemyRole.isChecked=this.scenario.isGenEnemy,this.btnInfantry.node.on("click",this.onClick_Btn,this),this.btnSpearman.node.on("click",this.onClick_Btn,this),this.btnCavalryman.node.on("click",this.onClick_Btn,this),this.btnArcher.node.on("click",this.onClick_Btn,this),this.btnAttack.node.on("click",this.onClick_Btn,this),this.btnHeart.node.on("click",this.onClick_Btn,this),this.btnDrum.node.on("click",this.onClick_Btn,this),this.lableMaxForage.string=this.maxForage.toString(),this.lableForage.schedule(function(){t.forage<t.maxForage&&t.setForage(1)},0,cc.macro.REPEAT_FOREVER,this.updateForageTime),this.btnAddGen.node.on("click",this.onClick_AddGen,this),this.btnAddEnemy.node.on("click",this.onClick_AddEnemy,this),this.setDiamond(),this.setHeroData()}else this.trans.reqBack()},e.prototype.start=function(){cc.director.getCollisionManager().enabled=!0,this.Role=this.Hero.getComponentInChildren("RoleBase"),this.moveGround=this.Role.xGdRoll*this.Role.speed,this.moveBackground=this.xBgRoll*this.Role.speed},e.prototype.onDestroy=function(){cc.director.getCollisionManager().enabled=!1,cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.update=function(){if(this._updateSpeedUI--,this._updateSpeedUI<=0&&(this._updateSpeedUI=this.updateSpeedUI,this.TxtSupporter.string=this.countSupporter()+"",this.TxtEnemyRole.string=this.countEnemyRole()+""),this.setAims(),this.pressedRight){if(this.Role.turnRight(),this.Role.isCollisionRight&&this.Role.isFaceToRight)return void(this.pressedRight=!1);this.Role.aniWalk(),this.Hero.x<=0||this.EnemyHome.active&&this.EnemyHome.x<=this.width?this.Hero.x+=this.moveGround:(this.rollLeftBackground(),this.rollLeftGround()),this.nowX+=this.moveGround,this.txtNowX.string=this.nowX+""}else if(this.pressedLeft){if(this.Role.turnLeft(),this.Role.isCollisionLeft&&!this.Role.isFaceToRight)return void(this.pressedLeft=!1);this.Role.aniWalk(),this.Hero.x>=0||this.Home.x>=-this.width?this.Hero.x-=this.moveGround:(this.rollRightBackground(),this.rollRightGround()),this.nowX-=this.moveGround,this.txtNowX.string=this.nowX+""}else this.Role.isFight()||this.Role.aniStand();this.updateSkill(),this.updateHeroHP()},e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.right:this.pressedRight=!0,this.pressedLeft=!1;break;case cc.macro.KEY.left:this.pressedRight=!1,this.pressedLeft=!0}},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.trans.reqBack();case cc.macro.KEY.right:this.pressedRight=!1;break;case cc.macro.KEY.left:this.pressedLeft=!1}},e.prototype.rollRightBackground=function(){var t=this.Background.x+this.moveBackground;t>this.sideLeft&&(t=this.sideRight+(t-this.sideLeft)),this.Background.x=t},e.prototype.rollLeftBackground=function(){var t=this.Background.x-this.moveBackground;t<this.sideRight&&(t=this.sideLeft-(this.sideRight-t)),this.Background.x=t},e.prototype.rollRightGround=function(){var t=this.Ground.x+this.moveGround;t>this.sideLeft&&(t=this.sideRight+(t-this.sideLeft)),this.Ground.x=t,this.TowerHome.x+=this.moveGround,this.TowerEnemy.x+=this.moveGround,this.Home.x+=this.moveGround,this.EnemyHome.x+=this.moveGround,this.EnemyHero.x+=this.moveGround,this.Supporter.x+=this.moveGround,this.EnemyRole.x+=this.moveGround},e.prototype.rollLeftGround=function(){var t=this.Ground.x-this.moveGround;t<this.sideRight&&(t=this.sideLeft-(this.sideRight-t)),this.Ground.x=t,this.TowerHome.x-=this.moveGround,this.TowerEnemy.x-=this.moveGround,this.Home.x-=this.moveGround,this.EnemyHome.x-=this.moveGround,this.EnemyHero.x-=this.moveGround,this.Supporter.x-=this.moveGround,this.EnemyRole.x-=this.moveGround},e.prototype.countSupporter=function(){var t=0;return this.Supporter.children.forEach(function(e){e.getComponent("RoleBase").isDead||t++}),t},e.prototype.countEnemyRole=function(){var t=0;return this.EnemyRole.children.forEach(function(e){var o=e.getComponent("RoleBase");o&&(o.isDead||t++)}),t},e.prototype.onToggle_togHeroCollider=function(t){this.scenario.setHeroCollider(t.isChecked)},e.prototype.onToggle_togGenSupporter=function(t){this.scenario.isGenSupport=t.isChecked},e.prototype.onToggle_togGenEnemyRole=function(t){this.scenario.isGenEnemy=t.isChecked},e.prototype.onClick_Btn=function(t){switch(t.node.name){case"ButtonInfantry":this.setForage(-40)&&(this.scenario.addSupportSoldier("Infantry"),this.setBtnCD(this.btnInfantry,!0));break;case"ButtonSpearman":this.setForage(-40)&&(this.scenario.addSupportSoldier("Spearman"),this.setBtnCD(this.btnSpearman,!0));break;case"ButtonCavalryman":this.setForage(-40)&&(this.scenario.addSupportSoldier("Cavalryman"),this.setBtnCD(this.btnCavalryman,!0));break;case"ButtonArcher":this.setForage(-50)&&(this.scenario.addSupportSoldier("Archer"),this.setBtnCD(this.btnArcher,!0));break;case"ButtonAttack":break;case"ButtonHeart":this.scenario.enrichBlood(),this.useDiamond(1)}},e.prototype.setForage=function(t){if(this.forage+t>this.maxForage)this.forage=this.maxForage;else{if(this.forage+t<0)return!1;this.forage+=t}return this.lableForage.string=this.forage.toString(),!0},e.prototype.setBtnCD=function(t,e){var o=t.node.children[1].getComponent(cc.Sprite);e&&(t.interactable=!1,o.fillRange=0),o.fillRange+=.01,1==o.fillRange&&(t.interactable=!0)},e.prototype.updateSkill=function(){this.btnInfantry.interactable?this.btnSpearman.interactable?this.btnCavalryman.interactable?this.btnArcher.interactable||this.setBtnCD(this.btnArcher,!1):this.setBtnCD(this.btnCavalryman,!1):this.setBtnCD(this.btnSpearman,!1):this.setBtnCD(this.btnInfantry,!1)},e.prototype.updateHeroHP=function(){var t=this.Hero.getComponentInChildren("Vitalsigns");this.labHP.string=t.HP+"/"+t.maxHP,this.progressHeroHP.progress=t.progressBarHp},e.prototype.onClick_AddGen=function(){this.scenario.addEnemyGeneral()},e.prototype.onClick_AddEnemy=function(){this.scenario.addEnemy("Infantry")},e.prototype.setDiamond=function(){this.labDiamondNum.string=""+this.gameCfg.Items[this.ItemID_Diamond]},e.prototype.setAims=function(){this.scenario.killedEnemySoilderNum<this.scenario.needKillEnemySoilderNum?this.txtAim.string="\u64ca\u6bba\u6575\u65b9\u58eb\u5175"+this.scenario.killedEnemySoilderNum.toString()+"/"+this.scenario.needKillEnemySoilderNum.toString():this.scenario.killedEnemySoilderNum>=this.scenario.needKillEnemySoilderNum&&!this.scenario.isEnemyHeroDead?this.txtAim.string="\u64ca\u6557\u6575\u65b9\u6b66\u5c07":this.scenario.killedEnemySoilderNum>=this.scenario.needKillEnemySoilderNum&&this.scenario.isEnemyHeroDead&&!this.scenario.isEnemyHomeDead&&(this.txtAim.string="\u6467\u6bc0\u6575\u71df")},e.prototype.setHeroData=function(){var t=this.bundleData.HeroID;this.spriteHeroImg.spriteFrame=this.HeroIcon[t]},e.prototype.useDiamond=function(t){var e=this.gameCfg.Items[this.ItemID_Diamond];0==e||(this.gameCfg.Items[this.ItemID_Diamond]=e-t,this.gameCfg.SaveItems())},__decorate([c],e.prototype,"updateSpeedUI",void 0),__decorate([c(cc.Label)],e.prototype,"txtNowX",void 0),__decorate([c(cc.Label)],e.prototype,"labHP",void 0),__decorate([c(cc.ProgressBar)],e.prototype,"progressHeroHP",void 0),__decorate([c(cc.Label)],e.prototype,"TxtSupporter",void 0),__decorate([c(cc.Label)],e.prototype,"TxtEnemyRole",void 0),__decorate([c(cc.Label)],e.prototype,"TxtBattleID",void 0),__decorate([c(cc.Label)],e.prototype,"txtAim",void 0),__decorate([c(cc.Toggle)],e.prototype,"togHeroCollider",void 0),__decorate([c(cc.Toggle)],e.prototype,"togGenSupporter",void 0),__decorate([c(cc.Toggle)],e.prototype,"togGenEnemyRole",void 0),__decorate([c(cc.Button)],e.prototype,"btnAddGen",void 0),__decorate([c(cc.Button)],e.prototype,"btnAddEnemy",void 0),__decorate([c(cc.Label)],e.prototype,"labDiamondNum",void 0),__decorate([c(cc.Sprite)],e.prototype,"spriteHeroImg",void 0),__decorate([c(cc.Node)],e.prototype,"Background",void 0),__decorate([c(cc.Node)],e.prototype,"Ground",void 0),__decorate([c(cc.Node)],e.prototype,"Hero",void 0),__decorate([c(cc.Node)],e.prototype,"EnemyHero",void 0),__decorate([c(cc.Node)],e.prototype,"Supporter",void 0),__decorate([c(cc.Node)],e.prototype,"EnemyRole",void 0),__decorate([c(cc.Node)],e.prototype,"Home",void 0),__decorate([c(cc.Node)],e.prototype,"EnemyHome",void 0),__decorate([c(cc.Node)],e.prototype,"TowerHome",void 0),__decorate([c(cc.Node)],e.prototype,"TowerEnemy",void 0),__decorate([c(cc.Button)],e.prototype,"btnInfantry",void 0),__decorate([c(cc.Button)],e.prototype,"btnSpearman",void 0),__decorate([c(cc.Button)],e.prototype,"btnCavalryman",void 0),__decorate([c(cc.Button)],e.prototype,"btnArcher",void 0),__decorate([c(cc.Button)],e.prototype,"btnAttack",void 0),__decorate([c(cc.Button)],e.prototype,"btnHeart",void 0),__decorate([c(cc.Button)],e.prototype,"btnDrum",void 0),__decorate([c(cc.Label)],e.prototype,"lableForage",void 0),__decorate([c(cc.Label)],e.prototype,"lableMaxForage",void 0),__decorate([c([cc.SpriteFrame])],e.prototype,"HeroIcon",void 0),__decorate([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Model/GameConfig":"GameConfig","../Model/LevelConfig":"LevelConfig","./MM_Transition":"MM_Transition"}],MM_08_01_01:[function(t,e,o){"use strict";cc._RF.push(e,"d1379NByoNI+IVwiA3a0tOz","MM_08_01_01"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Model/GeneralBG"),i=t("../Model/ChargeSelection"),r=t("../Model/GameConfig"),s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.curFocus=1,e.NodeGeneralBG=null,e.NodeChargeSelection1=null,e.NodeChargeSelection2=null,e.NodeChargeSelection3=null,e.NodeChargeSelection4=null,e.Point=null,e.Point1=null,e.Point2=null,e.Point3=null,e.Point4=null,e.Dollar1=null,e.Dollar2=null,e.Dollar3=null,e.Dollar4=null,e.gameCfg=null,e.GeneralBG=null,e.ChargeSelection1=null,e.ChargeSelection2=null,e.ChargeSelection3=null,e.ChargeSelection4=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.gameCfg=new r.default,this.gameCfg.Load(),this.Point.string=""+this.gameCfg.piont,this.Point1.string="10",this.Dollar1.string="1",this.Point2.string="20",this.Dollar2.string="2",this.Point3.string="60",this.Dollar3.string="5",this.Point4.string="150",this.Dollar4.string="10",this.ChargeSelection1=this.NodeChargeSelection1.getComponent(i.default),this.ChargeSelection2=this.NodeChargeSelection2.getComponent(i.default),this.ChargeSelection3=this.NodeChargeSelection3.getComponent(i.default),this.ChargeSelection4=this.NodeChargeSelection4.getComponent(i.default),this.NodeChargeSelection1.on("click",function(){t.onClick_BtnFocus(1)},this),this.NodeChargeSelection2.on("click",function(){t.onClick_BtnFocus(2)},this),this.NodeChargeSelection3.on("click",function(){t.onClick_BtnFocus(3)},this),this.NodeChargeSelection4.on("click",function(){t.onClick_BtnFocus(4)},this),this.GeneralBG=this.NodeGeneralBG.getComponent(n.default),this.GeneralBG.setOnClick_BtnConfirm(function(){t.onClick_BtnConfirm()}),this.flash(),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onDestroy=function(){cc.systemEvent.targetOff(this)},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.GeneralBG.onClick_BtnCancel(null)}},e.prototype.flash=function(){this.ChargeSelection1.setFocus(!1),this.ChargeSelection2.setFocus(!1),this.ChargeSelection3.setFocus(!1),this.ChargeSelection4.setFocus(!1),1==this.curFocus?this.ChargeSelection1.setFocus(!0):2==this.curFocus?this.ChargeSelection2.setFocus(!0):3==this.curFocus?this.ChargeSelection3.setFocus(!0):4==this.curFocus&&this.ChargeSelection4.setFocus(!0),this.ChargeSelection1.flash(),this.ChargeSelection2.flash(),this.ChargeSelection3.flash(),this.ChargeSelection4.flash()},e.prototype.onClick_BtnFocus=function(t){this.curFocus=t,this.flash()},e.prototype.onClick_BtnConfirm=function(){1==this.curFocus?this.gameCfg.AddPiontQty(10):2==this.curFocus?this.gameCfg.AddPiontQty(20):3==this.curFocus?this.gameCfg.AddPiontQty(60):4==this.curFocus&&this.gameCfg.AddPiontQty(150),this.Point.string=""+this.gameCfg.piont},__decorate([c(cc.Integer)],e.prototype,"curFocus",void 0),__decorate([c(cc.Node)],e.prototype,"NodeGeneralBG",void 0),__decorate([c(cc.Node)],e.prototype,"NodeChargeSelection1",void 0),__decorate([c(cc.Node)],e.prototype,"NodeChargeSelection2",void 0),__decorate([c(cc.Node)],e.prototype,"NodeChargeSelection3",void 0),__decorate([c(cc.Node)],e.prototype,"NodeChargeSelection4",void 0),__decorate([c(cc.Label)],e.prototype,"Point",void 0),__decorate([c(cc.Label)],e.prototype,"Point1",void 0),__decorate([c(cc.Label)],e.prototype,"Point2",void 0),__decorate([c(cc.Label)],e.prototype,"Point3",void 0),__decorate([c(cc.Label)],e.prototype,"Point4",void 0),__decorate([c(cc.Label)],e.prototype,"Dollar1",void 0),__decorate([c(cc.Label)],e.prototype,"Dollar2",void 0),__decorate([c(cc.Label)],e.prototype,"Dollar3",void 0),__decorate([c(cc.Label)],e.prototype,"Dollar4",void 0),__decorate([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../Model/ChargeSelection":"ChargeSelection","../Model/GameConfig":"GameConfig","../Model/GeneralBG":"GeneralBG"}],MM_08_02_01:[function(t,e,o){"use strict";cc._RF.push(e,"4924cfY9fVPOLctUoX32zf6","MM_08_02_01"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Model/GeneralBG"),i=cc._decorator,r=i.ccclass,s=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeGeneralBG=null,e.GeneralBG=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.GeneralBG=this.NodeGeneralBG.getComponent(n.default)},__decorate([s(cc.Node)],e.prototype,"NodeGeneralBG",void 0),__decorate([r],e)}(cc.Component);o.default=a,cc._RF.pop()},{"../Model/GeneralBG":"GeneralBG"}],MM_08_03_01:[function(t,e,o){"use strict";cc._RF.push(e,"97d8f1Lv6pBXbAztoA6UiBi","MM_08_03_01"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./MM_Transition"),i=cc._decorator,r=i.ccclass,s=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeConfigWindow=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.nodeConfigWindow.getComponent("ConfigWindow").setOnClick_btnBack(function(e){t.onClick_btnBack(e)})},e.prototype.onClick_btnBack=function(){cc.log("onClick_btnBack"),(new n.default).reqBack()},__decorate([s(cc.Node)],e.prototype,"nodeConfigWindow",void 0),__decorate([r],e)}(cc.Component);o.default=a,cc._RF.pop()},{"./MM_Transition":"MM_Transition"}],MM_08_04_01:[function(t,e,o){"use strict";cc._RF.push(e,"188c0Y79yxPJb81ECfuypC0","MM_08_04_01"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Model/GeneralBG"),i=t("../Model/GameConfig"),r=t("../Model/MarketSelection"),s=t("../Model/MessageDialog"),a=t("./MM_Transition"),c=cc._decorator,l=c.ccclass,d=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.focusItemID=1,e.focusItemQty=1,e.NodeGeneralBG=null,e.ReducePoint=null,e.HavedPoint=null,e.ItemName=null,e.ItemDes=null,e.ItemHave=null,e.ItemCount=null,e.box=null,e.sorghum=null,e.dukang=null,e.diamond=null,e.upPower=null,e.upCON=null,e.upSTR=null,e.upAGI=null,e.sorghum12=null,e.dukang12=null,e.diamond12=null,e.upPower12=null,e.upCON12=null,e.upSTR12=null,e.upAGI12=null,e.gameCfg=null,e.GeneralBG=null,e.reducePoint=-1,e.trans=null,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.trans=new a.default,this.gameCfg=new i.default,this.gameCfg.Load(),this.ItemName.string="",this.ItemDes.string="",this.ReducePoint.string="",this.HavedPoint.string=""+this.gameCfg.piont,this.ItemHave.active=!1,this.GeneralBG=this.NodeGeneralBG.getComponent(n.default),this.GeneralBG.setOnClick_BtnConfirm(function(){t.onClick_BtnConfirm()}),this.box.node.on("click",function(){t.onClick_BtnFocus(0,1,t.box)},this),this.diamond.node.on("click",function(){t.onClick_BtnFocus(1,1,t.diamond)},this),this.sorghum.node.on("click",function(){t.onClick_BtnFocus(2,1,t.sorghum)},this),this.dukang.node.on("click",function(){t.onClick_BtnFocus(3,1,t.dukang)},this),this.upPower.node.on("click",function(){t.onClick_BtnFocus(4,1,t.upPower)},this),this.upCON.node.on("click",function(){t.onClick_BtnFocus(5,1,t.upCON)},this),this.upSTR.node.on("click",function(){t.onClick_BtnFocus(6,1,t.upSTR)},this),this.upAGI.node.on("click",function(){t.onClick_BtnFocus(7,1,t.upAGI)},this),this.diamond12.node.on("click",function(){t.onClick_BtnFocus(1,12,t.diamond12)},this),this.sorghum12.node.on("click",function(){t.onClick_BtnFocus(2,12,t.sorghum12)},this),this.dukang12.node.on("click",function(){t.onClick_BtnFocus(3,12,t.dukang12)},this),this.upPower12.node.on("click",function(){t.onClick_BtnFocus(4,12,t.upPower12)},this),this.upCON12.node.on("click",function(){t.onClick_BtnFocus(5,12,t.upCON12)},this),this.upSTR12.node.on("click",function(){t.onClick_BtnFocus(6,12,t.upSTR12)},this),this.upAGI12.node.on("click",function(){t.onClick_BtnFocus(7,12,t.upAGI12)},this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onDestroy=function(){cc.systemEvent.targetOff(this)},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.trans.reqBack()}},e.prototype.onClick_BtnFocus=function(t,e,o){if(this.focusItemID=t,this.focusItemQty=e,1==this.focusItemQty)switch(this.focusItemID){case 1:case 2:case 4:this.reducePoint=10;break;case 0:case 3:case 5:case 6:case 7:this.reducePoint=20}else if(12==this.focusItemQty)switch(this.focusItemID){case 1:case 2:case 4:this.reducePoint=100;break;case 3:case 5:case 6:case 7:this.reducePoint=200}-1==this.gameCfg.Items[this.focusItemID]?this.ItemHave.active=!1:(this.ItemHave.active=!0,this.ItemCount.string=""+this.gameCfg.Items[this.focusItemID]),this.ItemName.string="ItemID:"+t,this.ItemDes.string="\u9084\u6c92\u5beb ItemID:"+t,this.ReducePoint.string=""+this.reducePoint,this.box.setFocus(!1),this.sorghum.setFocus(!1),this.dukang.setFocus(!1),this.diamond.setFocus(!1),this.upPower.setFocus(!1),this.upCON.setFocus(!1),this.upSTR.setFocus(!1),this.upAGI.setFocus(!1),this.sorghum12.setFocus(!1),this.dukang12.setFocus(!1),this.diamond12.setFocus(!1),this.upPower12.setFocus(!1),this.upCON12.setFocus(!1),this.upSTR12.setFocus(!1),this.upAGI12.setFocus(!1),o.setFocus(!0),this.box.flash(),this.sorghum.flash(),this.dukang.flash(),this.diamond.flash(),this.upPower.flash(),this.upCON.flash(),this.upSTR.flash(),this.upAGI.flash(),this.sorghum12.flash(),this.dukang12.flash(),this.diamond12.flash(),this.upPower12.flash(),this.upCON12.flash(),this.upSTR12.flash(),this.upAGI12.flash()},e.prototype.onClick_BtnConfirm=function(){var t=this;if(-1!=this.reducePoint)if(this.gameCfg.piont>=this.reducePoint){var e="\u662f\u5426\u82b1\u8cbb"+this.reducePoint+"\u611b\u8c46\u8cfc\u8cb7ItemID:"+this.focusItemID;this.focusItemQty>1&&(e+="\u79ae\u5305"),s.default.showMsg_2btn(this.node,e,function(){t.onClick_Buy()},null,this.focusItemID,this.focusItemQty)}else e="\u9ede\u6578\u4e0d\u8db3\u662f\u5426\u5145\u503c",s.default.showMsg_2btn(this.node,e,function(){t.onClick_GotoCharge()},null,null,null)},e.prototype.onClick_Buy=function(){0!=this.focusItemID?(this.gameCfg.ReducePiontQty(this.reducePoint),this.gameCfg.AddItemQty(this.focusItemID,this.focusItemQty),this.ItemCount.string=""+this.gameCfg.Items[this.focusItemID],this.HavedPoint.string=""+this.gameCfg.piont):s.default.showMsg_1btn(this.node,"\u5c1a\u672a\u5be6\u88dd",null)},e.prototype.onClick_GotoCharge=function(){this.trans.reqForward("MM_08_01_01")},__decorate([d(cc.Integer)],e.prototype,"focusItemID",void 0),__decorate([d(cc.Integer)],e.prototype,"focusItemQty",void 0),__decorate([d(cc.Node)],e.prototype,"NodeGeneralBG",void 0),__decorate([d(cc.Label)],e.prototype,"ReducePoint",void 0),__decorate([d(cc.Label)],e.prototype,"HavedPoint",void 0),__decorate([d(cc.Label)],e.prototype,"ItemName",void 0),__decorate([d(cc.Label)],e.prototype,"ItemDes",void 0),__decorate([d(cc.Node)],e.prototype,"ItemHave",void 0),__decorate([d(cc.Label)],e.prototype,"ItemCount",void 0),__decorate([d(r.default)],e.prototype,"box",void 0),__decorate([d(r.default)],e.prototype,"sorghum",void 0),__decorate([d(r.default)],e.prototype,"dukang",void 0),__decorate([d(r.default)],e.prototype,"diamond",void 0),__decorate([d(r.default)],e.prototype,"upPower",void 0),__decorate([d(r.default)],e.prototype,"upCON",void 0),__decorate([d(r.default)],e.prototype,"upSTR",void 0),__decorate([d(r.default)],e.prototype,"upAGI",void 0),__decorate([d(r.default)],e.prototype,"sorghum12",void 0),__decorate([d(r.default)],e.prototype,"dukang12",void 0),__decorate([d(r.default)],e.prototype,"diamond12",void 0),__decorate([d(r.default)],e.prototype,"upPower12",void 0),__decorate([d(r.default)],e.prototype,"upCON12",void 0),__decorate([d(r.default)],e.prototype,"upSTR12",void 0),__decorate([d(r.default)],e.prototype,"upAGI12",void 0),__decorate([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../Model/GameConfig":"GameConfig","../Model/GeneralBG":"GeneralBG","../Model/MarketSelection":"MarketSelection","../Model/MessageDialog":"MessageDialog","./MM_Transition":"MM_Transition"}],MM_08_05_01:[function(t,e,o){"use strict";cc._RF.push(e,"f55d7tI7RdPVY62lI7tnWOo","MM_08_05_01"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Model/GeneralBG"),i=cc._decorator,r=i.ccclass,s=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeGeneralBG=null,e.GeneralBG=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.GeneralBG=this.NodeGeneralBG.getComponent(n.default)},__decorate([s(cc.Node)],e.prototype,"NodeGeneralBG",void 0),__decorate([r],e)}(cc.Component);o.default=a,cc._RF.pop()},{"../Model/GeneralBG":"GeneralBG"}],MM_09_02_01:[function(t,e,o){"use strict";cc._RF.push(e,"b3c00nZWSBCs7NHFF8/jHCX","MM_09_02_01"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./MM_Transition"),i=cc._decorator,r=i.ccclass,s=(i.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.trans=null,e}return __extends(e,t),e.prototype.onLoad=function(){cc.log("onLoad"),this.trans=new n.default},e.prototype.start=function(){var t=this;cc.log("start");var e=this.trans.getNextScene();e?cc.director.preloadScene(e,function(e,o,n){t.onProgress(e,o,n)},function(e){t.onPreloadScene(e)}):(cc.log("trans.nextScene == null"),this.trans.reqBack())},e.prototype.onProgress=function(){},e.prototype.onPreloadScene=function(t){var e=this;if(cc.log("Next scene preloaded","error=",t),t)this.trans.reqBack();else{var o=this.trans.getNextScene();cc.director.loadScene(o,function(){e.onLoadScene(o)})}},e.prototype.onLoadScene=function(t){cc.log("Next scene onLoadScene"),"MM_01_01_01"==t&&(cc.director.getScene().getChildByName("Canvas").getComponent("MM_01_01_01").showStartAni=!1)},__decorate([r],e)}(cc.Component));o.default=s,cc._RF.pop()},{"./MM_Transition":"MM_Transition"}],MM_Transition:[function(t,e,o){"use strict";cc._RF.push(e,"a2659nmCBFO0rAJAissXNd3","MM_Transition"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){var e=t.call(this)||this;return e.tHistory=[],e.bundleData={},window.CC_Transition=window.CC_Transition||{},window.CC_Transition.tHistory?e.tHistory=window.CC_Transition.tHistory:window.CC_Transition.tHistory=e.tHistory,window.CC_Transition.bundleData?e.bundleData=window.CC_Transition.bundleData:window.CC_Transition.bundleData=e.bundleData,e}return __extends(e,t),e.prototype.getNextScene=function(){return window.CC_Transition.nextScene},e.prototype.setNextScene=function(t){window.CC_Transition.nextScene=t},e.prototype.setBundle=function(t){this.bundleData.data=t},e.prototype.getBundle=function(){return this.bundleData.data},e.prototype.reqForward=function(t){cc.log("reqForward",t),this.tHistory.push(t),this.setNextScene(t),cc.director.loadScene("MM_09_02_01",this.onLaunched_MM_09_02_01)},e.prototype.reqBack=function(){if(cc.log("reqBack",this.tHistory.pop()),0!=this.tHistory.length){var t=this.tHistory[this.tHistory.length-1];this.setNextScene(t),cc.director.loadScene("MM_09_02_01",this.onLaunched_MM_09_02_01)}else this.reqForward("MM_01_01_01")},e.prototype.onLaunched_MM_09_02_01=function(){cc.log("onLaunched_MM_09_02_01")},__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],MarketSelection:[function(t,e,o){"use strict";cc._RF.push(e,"8bc34g1OLpF+57RVyK89qfr","MarketSelection"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Unselected=null,e.Selected=null,e.isFocus=!0,e.ItemID=0,e.Qty=12,e.isShowQty=!0,e.NodeQty=null,e.labQty=null,e.SprItem=null,e.box=null,e.sorghum=null,e.dukang=null,e.diamond=null,e.upPower=null,e.upCON=null,e.upSTR=null,e.upAGI=null,e.objAni=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.objAni=this.getComponent("cc.Animation"),this.flash()},e.prototype.flash=function(){var t=this.objAni.getClips();switch(this.isFocus?this.objAni.play(t[0].name):(this.objAni.stop(),this.Selected.active=!1),this.labQty.string=""+this.Qty,this.NodeQty.active=this.isShowQty,this.ItemID){case 0:this.SprItem.spriteFrame=this.box;break;case 1:this.SprItem.spriteFrame=this.diamond;break;case 2:this.SprItem.spriteFrame=this.sorghum;break;case 3:this.SprItem.spriteFrame=this.dukang;break;case 4:this.SprItem.spriteFrame=this.upPower;break;case 5:this.SprItem.spriteFrame=this.upCON;break;case 6:this.SprItem.spriteFrame=this.upSTR;break;case 7:this.SprItem.spriteFrame=this.upAGI;break;default:this.SprItem.spriteFrame=null}},e.prototype.setFocus=function(t){this.isFocus=t},__decorate([r(cc.Node)],e.prototype,"Unselected",void 0),__decorate([r(cc.Node)],e.prototype,"Selected",void 0),__decorate([r],e.prototype,"isFocus",void 0),__decorate([r(cc.Integer)],e.prototype,"ItemID",void 0),__decorate([r(cc.Integer)],e.prototype,"Qty",void 0),__decorate([r(cc.Boolean)],e.prototype,"isShowQty",void 0),__decorate([r(cc.Node)],e.prototype,"NodeQty",void 0),__decorate([r(cc.Label)],e.prototype,"labQty",void 0),__decorate([r(cc.Sprite)],e.prototype,"SprItem",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"box",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"sorghum",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"dukang",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"diamond",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"upPower",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"upCON",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"upSTR",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"upAGI",void 0),__decorate([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],MessageDialog:[function(t,e,o){"use strict";cc._RF.push(e,"2705fjtXHZOR4WlplXmsjE9","MessageDialog"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.msg="",e.ItemID=0,e.ItemCount=0,e.isShowItem=!0,e.isShowContinue=!0,e.btnYes=null,e.btnNo=null,e.btnCountinue=null,e.NodeItem=null,e.imgItem=null,e.labItemCount=null,e.labMessage=null,e.box=null,e.diamond=null,e.sorghum=null,e.dukang=null,e.upPower=null,e.upCON=null,e.upSTR=null,e.upAGI=null,e.onClick_BtnYesPlus=null,e.onClick_BtnNoPlus=null,e.onClick_BtnCountinuePlus=null,e}var o;return __extends(e,t),o=e,e.showMsg_1btn=function(t,e,n){cc.loader.loadRes("MessageDialog",function(i,r){var s=cc.instantiate(r),a=s.getComponent(o);a.msg=e,a.setOnClick_BtnContinue(n),a.isShowItem=!1,a.isShowContinue=!0,t.addChild(s)})},e.showMsg_2btn=function(t,e,n,i,r,s){cc.loader.loadRes("MessageDialog",function(a,c){var l=cc.instantiate(c),d=l.getComponent(o);d.msg=e,d.setOnClick_BtnYes(n),d.setOnClick_BtnNo(i),d.isShowContinue=!1,d.isShowItem=!1,r&&s&&(d.isShowItem=!0,d.ItemID=r,d.ItemCount=s),t.addChild(l)})},e.prototype.onLoad=function(){this.btnCountinue.on("click",this.onClick_BtnContinue,this),this.btnYes.on("click",this.onClick_BtnYes,this),this.btnNo.on("click",this.onClick_BtnNo,this),this.flash()},e.prototype.flash=function(){switch(this.btnYes.active=!1,this.btnNo.active=!1,this.btnCountinue.active=!1,this.isShowContinue?this.btnCountinue.active=!0:(this.btnYes.active=!0,this.btnNo.active=!0),this.labMessage.string=this.msg,this.NodeItem.active=this.isShowItem,this.labItemCount.string=""+this.ItemCount,this.ItemID){case 0:this.imgItem.spriteFrame=this.box;break;case 1:this.imgItem.spriteFrame=this.diamond;break;case 2:this.imgItem.spriteFrame=this.sorghum;break;case 3:this.imgItem.spriteFrame=this.dukang;break;case 4:this.imgItem.spriteFrame=this.upPower;break;case 5:this.imgItem.spriteFrame=this.upCON;break;case 6:this.imgItem.spriteFrame=this.upSTR;break;case 7:this.imgItem.spriteFrame=this.upAGI}},e.prototype.setOnClick_BtnYes=function(t){this.onClick_BtnYesPlus=t},e.prototype.onClick_BtnYes=function(t){this.onClick_BtnYesPlus&&this.onClick_BtnYesPlus(t),this.node.removeFromParent()},e.prototype.setOnClick_BtnNo=function(t){this.onClick_BtnNoPlus=t},e.prototype.onClick_BtnNo=function(t){this.onClick_BtnNoPlus&&this.onClick_BtnNoPlus(t),this.node.removeFromParent()},e.prototype.setOnClick_BtnContinue=function(t){this.onClick_BtnCountinuePlus=t},e.prototype.onClick_BtnContinue=function(t){this.onClick_BtnCountinuePlus&&this.onClick_BtnCountinuePlus(t),this.node.removeFromParent()},__decorate([r(cc.String)],e.prototype,"msg",void 0),__decorate([r(cc.Integer)],e.prototype,"ItemID",void 0),__decorate([r(cc.Integer)],e.prototype,"ItemCount",void 0),__decorate([r],e.prototype,"isShowItem",void 0),__decorate([r],e.prototype,"isShowContinue",void 0),__decorate([r(cc.Node)],e.prototype,"btnYes",void 0),__decorate([r(cc.Node)],e.prototype,"btnNo",void 0),__decorate([r(cc.Node)],e.prototype,"btnCountinue",void 0),__decorate([r(cc.Node)],e.prototype,"NodeItem",void 0),__decorate([r(cc.Sprite)],e.prototype,"imgItem",void 0),__decorate([r(cc.Label)],e.prototype,"labItemCount",void 0),__decorate([r(cc.Label)],e.prototype,"labMessage",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"box",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"diamond",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"sorghum",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"dukang",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"upPower",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"upCON",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"upSTR",void 0),__decorate([r(cc.SpriteFrame)],e.prototype,"upAGI",void 0),o=__decorate([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],MilitarySkill:[function(t,e,o){"use strict";cc._RF.push(e,"e5325xvxo5KZ6pMwlXecllf","MilitarySkill"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NodeOff=null,e.StarOff=null,e.isOn=!0,e}return __extends(e,t),e.prototype.onLoad=function(){this.flash()},e.prototype.flash=function(){this.NodeOff.active=!this.isOn,this.StarOff.active=!this.isOn},e.prototype.setOn=function(t){this.isOn=t},__decorate([r(cc.Node)],e.prototype,"NodeOff",void 0),__decorate([r(cc.Node)],e.prototype,"StarOff",void 0),__decorate([r],e.prototype,"isOn",void 0),__decorate([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],RoleBase:[function(t,e,o){"use strict";cc._RF.push(e,"14f9diScThHfaEV8W48QFp6","RoleBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isDead=!1,e.isFaceToRight=!0,e.isInField=!1,e.vitalsigns=null,e.isStand=!0,e.isWalking=!1,e.isFighting=!1,e.isCollisionLeft=!1,e.isCollisionRight=!1,e.ccBoxs=[],e.xGdRoll=2.5,e.speed=1,e.moveGround=0,e.ani=null,e.clips=null,e.DeadCount=150,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.vitalsigns=this.getComponent("Vitalsigns"),null!=this.vitalsigns&&(this.vitalsigns.setOnDead(function(){t.onDead()}),this.moveGround=this.xGdRoll*this.speed,this.ani=this.getComponent("cc.Animation"),this.clips=this.ani.getClips(),this.ani.play(this.ani.defaultClip.name),this.isFaceToRight||this.turnLeft())},e.prototype.update=function(){if(this.isInField)return this.isDead?(this.DeadCount--,void(this.DeadCount<=0&&this.node.removeFromParent(!0))):void(this.isFight()||(this.isFaceToRight?(this.turnRight(),this.aniWalk(),this.node.x+=this.moveGround):(this.turnLeft(),this.aniWalk(),this.node.x-=this.moveGround)))},e.prototype.turnRight=function(){this.node.is3DNode=!0,this.isFaceToRight=!0,this.node.eulerAngles=cc.v3(0,0,0)},e.prototype.turnLeft=function(){this.node.is3DNode=!0,this.isFaceToRight=!1,this.node.eulerAngles=cc.v3(0,180,0)},e.prototype.aniStand=function(){this.isDead||(this.isWalking=!1,this.isFighting=!1,this.isStand||(this.isStand=!0,this.ani.play(this.clips[0].name)))},e.prototype.aniWalk=function(){this.isDead||(this.isFighting=!1,this.isStand=!1,this.isWalking||(this.isWalking=!0,this.ani.play(this.clips[1].name)))},e.prototype.aniFight=function(){this.isDead||(this.isWalking=!1,this.isStand=!1,this.isFighting||(this.isFighting=!0,this.ani.play(this.clips[2].name)))},e.prototype.aniDead=function(){this.isDead||(this.isDead=!0,this.ani.play(this.clips[3].name))},e.prototype.onDead=function(){this.aniDead()},e.prototype.onFight_End=function(){if(0!=this.ccBoxs.length){var t=this.findEnemy();if(t){var e=t.getComponent("Vitalsigns");("Enemy"!=this.node.group||"Support"!=t.node.group&&"default"!=t.node.group)&&("default"!=this.node.group&&"Support"!=this.node.group||"Enemy"!=t.node.group)||e&&e.beHitBy(this,this.vitalsigns.Damage)}}},e.prototype.onDead_Start=function(){this.isDead=!0,this.node.removeComponent("cc.BoxCollider");var t=this.node.getChildByName("HPProgressBar");this.node.removeChild(t,!0),this.onDead_StartPlus&&this.onDead_StartPlus()},e.prototype.onDead_End=function(){},e.prototype.setOnDead_Start=function(t){this.onDead_StartPlus=t},e.prototype.onCollisionEnter=function(t,e){if("TowerHome"!=t.node.group&&"TowerEnemy"!=t.node.group){this.ccBoxs.push(t),t.world.aabb.x>e.world.aabb.x?this.isCollisionRight=!0:this.isCollisionLeft=!0;var o=e.world;o.aabb,o.preAabb,o.transform,o.radius,o.position,o.points}},e.prototype.onCollisionStay=function(){},e.prototype.onCollisionExit=function(t,e){var o=this;this.ccBoxs=this.ccBoxs.filter(function(e){return e.uuid!=t.uuid}),this.isCollisionLeft=!1,this.isCollisionRight=!1,0!=this.ccBoxs.length&&this.ccBoxs.forEach(function(t){o.isCollisionLeft&&o.isCollisionRight||"TowerHome"!=t.node.group&&"TowerEnemy"!=t.node.group&&(t.world.aabb.x>e.world.aabb.x?o.isCollisionRight=!0:o.isCollisionLeft=!0)})},e.prototype.isCollidedEnemy=function(t){return"TowerHome"!=t.node.group&&"TowerEnemy"!=t.node.group&&("Enemy"==this.node.group&&("Support"==t.node.group||"default"==t.node.group)||("default"==this.node.group||"Support"==this.node.group)&&"Enemy"==t.node.group)},e.prototype.findEnemy=function(){var t=null;if(!this.isCollisionLeft&&!this.isCollisionRight)return t;var e=cc.mat4();this.node.getWorldMatrix(e);var o=new cc.Vec3;e.getTranslation(o),this.node.parent.name;for(var n=0;n<this.ccBoxs.length;n++){var i=this.ccBoxs[n];if((!(n+1<this.ccBoxs.length)||"Home"!=i.node.name&&"EnemyHome"!=i.node.name)&&this.isCollidedEnemy(i)){(t=i).world.aabb.x>o.x?this.turnRight():this.turnLeft();break}}return t},e.prototype.isFight=function(){var t=!1;return this.findEnemy()?(this.aniFight(),t=!0):t},__decorate([r],e.prototype,"isDead",void 0),__decorate([r],e.prototype,"isFaceToRight",void 0),__decorate([r],e.prototype,"isInField",void 0),__decorate([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],Scenario:[function(t,e,o){"use strict";cc._RF.push(e,"6a9394EWq5M/6zFLi3jgMzl","Scenario"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./MessageDialog"),i=t("../Screen/MM_Transition"),r=cc._decorator,s=r.ccclass,a=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isGenSupport=!0,e.supportType=null,e.isGenEnemy=!0,e.GenSpeedSupport=600,e.GenSpeedEnemy=600,e.distance=2e3,e.Hero=null,e.EnemyHero=null,e.Supporter=null,e.EnemyRole=null,e.Home=null,e.EnemyHome=null,e.TowerHome=null,e.TowerEnemy=null,e.PrefabHPProgressBar=null,e.PrefabZhangJiao=null,e.RedInfantry=null,e.RedArcher=null,e.RedCavalryman=null,e.RedSpearman=null,e.BlueInfantry=null,e.BlueArcher=null,e.BlueCavalryman=null,e.BlueSpearman=null,e.SID=0,e._GenSpeedSupport=0,e.needKillEnemySoilderNum=0,e.isEnemyHeroDead=!1,e.isEnemyHomeDead=!1,e.isHomeDead=!1,e.isHeroDead=!1,e.isShowedEnemyHome=!1,e.killedEnemySoilderNum=0,e.isGenEnemyHero=!1,e.lastTimeGenEnemySoilder=0,e.lastTimeCheckEnd=0,e.timeGenEnemySoilder=5e3,e.timeCheckEnd=1e3,e}return __extends(e,t),e.prototype.onLoad=function(){this.Supporter.removeAllChildren(!0),this.Hero.removeAllChildren(!0),this.read()},e.prototype.start=function(){},e.prototype.update=function(){var t=Date.now();t-this.lastTimeGenEnemySoilder>this.timeGenEnemySoilder&&(this.lastTimeGenEnemySoilder=t,this.addEnemy(this.battleConfig.SoldierType)),t-this.lastTimeCheckEnd>this.timeCheckEnd&&(this.lastTimeCheckEnd=t,this.checkTheEnd())},e.prototype.checkTheEnd=function(){var t=this;this.isHeroDead&&!this.isHomeDead&&n.default.showMsg_2btn(this.node,"\u751f\u547d\u5782\u5371\uff01\u8cfc\u8cb7\u7dca\u6025\u91ab\u85e5\u7bb1\u6eff\u8840\u5fa9\u6d3b\uff0c\u9700\u82b1\u8cbb20\u611b\u8c46\u3002\u662f\u5426\u8cfc\u8cb7\uff1f",function(){return t.revivalHero()},null,null,null),this.isHomeDead?n.default.showMsg_1btn(this.node,"\u5931\u6557",function(){return t.onEndGame()}):this.killedEnemySoilderNum>=this.needKillEnemySoilderNum&&this.isEnemyHeroDead&&this.isEnemyHomeDead?(this.gameConfig.warRound[this.battleID]=1,this.gameConfig.SaveWarRound(),n.default.showMsg_1btn(this.node,"\u5b8c\u6210",function(){return t.onEndGame()})):this.killedEnemySoilderNum>=this.needKillEnemySoilderNum&&!this.isGenEnemyHero&&!this.isEnemyHeroDead?(n.default.showMsg_1btn(this.node,"\u6575\u65b9\u6b66\u5c07\u51fa\u73fe",null),this.isGenEnemyHero=!0,this.addEnemyGeneral()):this.killedEnemySoilderNum>=this.needKillEnemySoilderNum&&this.isEnemyHeroDead&&!this.isShowedEnemyHome&&!this.isEnemyHomeDead&&(this.isShowedEnemyHome=!0,n.default.showMsg_1btn(this.node,"\u6467\u6bc0\u6575\u71df",null))},e.prototype.setConfig=function(t,e,o){this.gameConfig=t,this.battleConfig=e,this.battleID=o},e.prototype.read=function(){var t=this,e=(this.PrefabZhangJiao,this.battleConfig.EnemyHomeHP),o=this.PrefabZhangJiao;this.battleConfig.Hard,this.needKillEnemySoilderNum=this.battleConfig.KillSoldiers,this.Supporter.x=this.Home.x+this.Home.width;var n=cc.instantiate(o),i=n.getComponent("RoleBase");i.isFaceToRight=!0,i.isInField=!1,this.Hero.addChild(n);var r=n.getComponent("Vitalsigns");r.setInitHP(300),r.setDamage(200),i.setOnDead_Start(function(){t.onDead_Hero(t.Hero)});var s=this.Home.getComponent("Vitalsigns");s.setInitHP(1e3),s.setOnDead(function(){t.onDead_Home(t.Home)}),this.battleConfig.EnemyHomeHP<=0&&(this.EnemyHome.active=!1,this.TowerEnemy.active=!1,this.isEnemyHomeDead=!0),this.battleConfig.EnemyHeroID<=0&&(this.isEnemyHeroDead=!0),this.distance=2e3,this.EnemyHome.x=this.Home.x+this.distance+this.EnemyHome.width,this.TowerEnemy.x=this.EnemyHome.x-330,this.EnemyRole.x=this.EnemyHome.x-this.EnemyHome.width,this.EnemyHero.x=this.EnemyRole.x;var a=this.EnemyHome.getComponent("Vitalsigns");a.setInitHP(e),a.setOnDead(function(){t.onDead_EnemyHome(t.EnemyHome)})},e.prototype.setSID=function(t){this.SID=t},e.prototype.setHeroCollider=function(t){this.Hero.getComponentInChildren("cc.BoxCollider").enabled=t},e.prototype.addSupportSoldier=function(t){var e,o=this;switch(t){case"Infantry":e=this.BlueInfantry;break;case"Spearman":e=this.BlueSpearman;break;case"Cavalryman":e=this.BlueCavalryman;break;case"Archer":e=this.BlueArcher}var n=cc.instantiate(e);n.group="Support";var i=n.getComponent("RoleBase");i.isFaceToRight=!0,i.isInField=!0,n.getComponent("Vitalsigns").setInitHP(100),i.setOnDead_Start(function(){o.onDead_Supporter(n)});var r=cc.instantiate(this.PrefabHPProgressBar);n.addChild(r),this.Supporter.addChild(n),this.isGenSupport=!1},e.prototype.onDead_Home=function(){cc.log("onDead_Home"),this.isHomeDead=!0},e.prototype.onDead_EnemyHome=function(){cc.log("onDead_EnemyHome"),this.isEnemyHomeDead=!0},e.prototype.onDead_Hero=function(){cc.log("onDead_Hero"),this.isHeroDead=!0},e.prototype.onDead_EnemyHero=function(){cc.log("onDead_EnemyHero"),this.isEnemyHeroDead=!0},e.prototype.onDead_Supporter=function(){cc.log("onDead_Supporter")},e.prototype.onDead_EnemyRole=function(){cc.log("onDead_EnemyRole"),this.killedEnemySoilderNum++},e.prototype.getRandomSoilder=function(t){return Math.floor(Math.random()*Math.floor(t))},e.prototype.addEnemy=function(t){var e,o=this;switch(t){case"Infantry":e=this.RedInfantry;break;case"Spearman":e=this.RedSpearman;break;case"Cavalryman":e=this.RedCavalryman;break;case"Archer":case"Avg":default:e=this.RedArcher}var n=cc.instantiate(e);n.group="Enemy";var i=n.getComponent("RoleBase");i.isFaceToRight=!1,i.isInField=!0,n.getComponent("Vitalsigns").setInitHP(100),i.setOnDead_Start(function(){o.onDead_EnemyRole(n)});var r=cc.instantiate(this.PrefabHPProgressBar);n.addChild(r),this.EnemyRole.addChild(n),this.isGenEnemy=!1},e.prototype.addEnemyGeneral=function(){var t=this,e=cc.instantiate(this.PrefabZhangJiao);e.group="Enemy";var o=e.getComponent("RoleBase");o.isFaceToRight=!1,o.isInField=!0,e.getComponent("Vitalsigns").setInitHP(1e3),o.setOnDead_Start(function(){t.onDead_EnemyHero(t.EnemyHero)});var n=cc.instantiate(this.PrefabHPProgressBar);e.addChild(n),this.EnemyHero.addChild(e)},e.prototype.onEndGame=function(){(new i.default).reqForward("MM_03_03_01")},e.prototype.enrichBlood=function(){this.Hero.children[0].getComponent("Vitalsigns").enrichBlood()},e.prototype.revivalHero=function(){this.Hero.children[0].getComponent("Vitalsigns").enrichBlood(),this.isHeroDead=!1},__decorate([a],e.prototype,"isGenSupport",void 0),__decorate([a],e.prototype,"supportType",void 0),__decorate([a],e.prototype,"isGenEnemy",void 0),__decorate([a],e.prototype,"GenSpeedSupport",void 0),__decorate([a],e.prototype,"GenSpeedEnemy",void 0),__decorate([a],e.prototype,"distance",void 0),__decorate([a(cc.Prefab)],e.prototype,"PrefabHPProgressBar",void 0),__decorate([a(cc.Prefab)],e.prototype,"PrefabZhangJiao",void 0),__decorate([a(cc.Prefab)],e.prototype,"RedInfantry",void 0),__decorate([a(cc.Prefab)],e.prototype,"RedArcher",void 0),__decorate([a(cc.Prefab)],e.prototype,"RedCavalryman",void 0),__decorate([a(cc.Prefab)],e.prototype,"RedSpearman",void 0),__decorate([a(cc.Prefab)],e.prototype,"BlueInfantry",void 0),__decorate([a(cc.Prefab)],e.prototype,"BlueArcher",void 0),__decorate([a(cc.Prefab)],e.prototype,"BlueCavalryman",void 0),__decorate([a(cc.Prefab)],e.prototype,"BlueSpearman",void 0),__decorate([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../Screen/MM_Transition":"MM_Transition","./MessageDialog":"MessageDialog"}],SolderInfoBase:[function(t,e,o){"use strict";cc._RF.push(e,"23479pN+xlF+J9WyCmK9h8m","SolderInfoBase"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=(n.ccclass,n.property,function(){function t(t,e,o){switch(this.Name="\u5c0f\u5c0f\u5175",this.Class=0,this.Lv=0,this.Exp=300,this.BaseCON=0,this.BaseSTR=0,this.BaseAGI=0,this.CON=0,this.STR=0,this.AGI=0,this.HP=0,this.ATK=0,this.AVD=0,this.CRI=0,this.NextExp=2e3,this.HD=10,this.Class=t,this.Lv=e,this.Exp=o,this.Class){case 0:this.setBaseData("\u6b65\u5175",25,20,10);break;case 1:this.setBaseData("\u69cd\u5175",22,22,10);break;case 2:this.setBaseData("\u9a0e\u5175",20,25,10);break;case 3:this.setBaseData("\u5f13\u5175",10,15,10)}}return t.prototype.setBaseData=function(t,e,o,n){this.Name=t,this.BaseCON=e,this.BaseSTR=o,this.BaseAGI=n,this.CON=this.param(this.BaseCON),this.STR=this.param(this.BaseSTR),this.AGI=this.param(this.BaseAGI),this.HP=this.paramHP(this.CON),this.ATK=this.paramATK(this.STR),this.CRI=this.AVD=this.paramAVD_CRI(this.AGI),this.NextExp=100*(this.Lv*this.Lv+this.Lv)},t.prototype.vInit=function(t){return this.HD*t*10/100},t.prototype.param=function(t){return this.vInit(t)*(9+this.Lv)/10},t.prototype.paramHP=function(t){return 20*t+500},t.prototype.paramATK=function(t){return 2*t+50},t.prototype.paramAVD_CRI=function(t){var e=t/1500;return e>1&&(e=1),e},t}());o.default=i,cc._RF.pop()},{}],Vitalsigns:[function(t,e,o){"use strict";cc._RF.push(e,"99da3x6kU1DM7KQx+hNarBz","Vitalsigns"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxHP=100,e.HP=100,e.Damage=10,e.progressBarHp=100,e.isDead=!1,e.onDeadPlus=null,e}return __extends(e,t),e.prototype.update=function(){this.updateHP()},e.prototype.setInitHP=function(t){this.maxHP=t,this.HP=t,this.progressBarHp=this.HP/this.maxHP},e.prototype.setDamage=function(t){this.Damage=t},e.prototype.beHitBy=function(t,e){return this.HP-=e,this.progressBarHp=this.HP/this.maxHP,this.HP<=0&&(this.progressBarHp=0,this.HP=0,this.isDead=!0,this.onDead()),this.isDead},e.prototype.setOnDead=function(t){this.onDeadPlus=t},e.prototype.onDead=function(){this.onDeadPlus&&this.onDeadPlus()},e.prototype.updateHP=function(){var t=this.node.getChildByName("HPProgressBar");if(t){var e=t.getComponent("HPControl");e&&e.setProgress(this.progressBarHp)}},e.prototype.enrichBlood=function(){this.HP=this.maxHP,this.progressBarHp=this.HP/this.maxHP},__decorate([r],e.prototype,"maxHP",void 0),__decorate([r],e.prototype,"HP",void 0),__decorate([r],e.prototype,"Damage",void 0),__decorate([i],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],use_reversed_rotateTo:[function(t,e){"use strict";cc._RF.push(e,"8d991Hu8oFCrZOXPEnK4jj8","use_reversed_rotateTo"),cc.RotateTo._reverse=!0,cc._RF.pop()},{}]},{},["BarracksInfo","BarracksSelection","Battle","CastleSelection","ChargeSelection","ConfigWindow","GameConfig","GeneralBG","HPControl","HeroControler","HeroInfo","HeroInfoBase","HeroInfoOrigin","HeroSelect","LevelConfig","MarketSelection","MessageDialog","MilitarySkill","RoleBase","Scenario","SolderInfoBase","Vitalsigns","MM_01_01_01","MM_02_01_01","MM_03_01_01","MM_03_02_01","MM_03_03_01","MM_03_03_02","MM_03_03_03","MM_03_04_01","MM_03_05_01","MM_03_06_01","MM_05_01_01","MM_08_01_01","MM_08_02_01","MM_08_03_01","MM_08_04_01","MM_08_05_01","MM_09_02_01","MM_Transition","use_reversed_rotateTo"]);